<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"><channel><title>Just for noting</title><link>https://blog.m157q.tw/</link><description></description><lastBuildDate>Wed, 17 Jan 2018 05:05:02 +0800</lastBuildDate><item><title>在 Arch Linux 上將 Docker 的 Storage Driver 從 devicemapper 改為 overlay2 以釋放硬碟空間</title><link>https://blog.m157q.tw/posts/2018/01/16/change-docker-storage-driver-from-devicemapper-to-overlay2-to-free-your-disk-space-on-arch-linux/</link><description>&lt;h2&gt;TL;DR&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://wiki.archlinux.org/index.php/Docker#Storage_driver"&gt;https://wiki.archlinux.org/index.php/Docker#Storage_driver&lt;/a&gt;  &lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;前言&lt;/h2&gt;
&lt;p&gt;因為硬碟空間只剩 1.8 GB，在清硬碟空間的時候發現 &lt;code&gt;/var/lib/docker/devicemapper&lt;/code&gt; 佔了 35 GB，以前同事在 Mac 上遇過，但一直找不到啥好解法，這次自己遇到了，於是就花了點時間查了一下。  &lt;/p&gt;
&lt;p&gt;先是用了 &lt;code&gt;docker system prune -a&lt;/code&gt; 把所有東西都清掉，結果發現 &lt;code&gt;/var/lib/docker/devicemappe&lt;/code&gt; 的大小只有減少 1 GB，但明明用 &lt;code&gt;docker info&lt;/code&gt; 檢查， Data used 就只剩 KB 而已，於是跑去找 Arch Wiki。  &lt;/p&gt;
&lt;p&gt;得到 Storage Driver 最好不要用 &lt;code&gt;devicemapper&lt;/code&gt; 的答案，新安裝的預設應該都會是 &lt;code&gt;overlay2&lt;/code&gt; 了，發現自己的 docker 仍舊是使用 &lt;code&gt;devicemapper&lt;/code&gt;，所以乾脆動手修改一下。  &lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;步驟&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;systemctl stop docker&lt;/code&gt; 把 dockerd 關了  &lt;/li&gt;
&lt;li&gt;因為我已經用 &lt;code&gt;docker system prune -a&lt;/code&gt; 把東西全砍了，所以就沒備份必要，直接 &lt;code&gt;sudo rm -rf /var/lib/docker&lt;/code&gt; 了  &lt;ul&gt;
&lt;li&gt;這個時候硬碟就多出了 35 GB 啦！  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;systemctl edit docker&lt;/code&gt; 編輯設定檔  &lt;ul&gt;
&lt;li&gt;如果 root 使用的 editor 非平常慣用的話，可以先 &lt;code&gt;export EDITOR=vim&lt;/code&gt; 再使用 &lt;code&gt;sudo -E bash -c "systemctl edit docker"&lt;/code&gt; 來編輯  &lt;/li&gt;
&lt;li&gt;應該會開啟 &lt;code&gt;/etc/systemd/system/docker.service.d/override.conf&lt;/code&gt; 或其暫存檔  &lt;/li&gt;
&lt;li&gt;新增以下內容，將 Storage Driver 指定成 &lt;code&gt;overlay2&lt;/code&gt; 後存檔離開：  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[Service]  
ExecStart=  
ExecStart=/usr/bin/dockerd -H fd:// -s overlay2  
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;&lt;code&gt;systemctl start docker&lt;/code&gt; 重新開啟 dockerd  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;docker info | head&lt;/code&gt; 裡頭應該要有一行 "Storage Driver: overlay2" 這樣就成功了  &lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;h2&gt;補充&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://docs.docker.com/engine/userguide/storagedriver/selectadriver/"&gt;Select a storage driver | Docker Documentation&lt;/a&gt;  &lt;ul&gt;
&lt;li&gt;這篇官方文件講述有哪些 Storage Driver 可供選擇以及各 Storage Driver 支援的 File System 格式  &lt;/li&gt;
&lt;li&gt;包含：&lt;code&gt;aufs&lt;/code&gt;, &lt;code&gt;devicemapper&lt;/code&gt;, &lt;code&gt;overlay&lt;/code&gt;, &lt;code&gt;overlay2&lt;/code&gt;, &lt;code&gt;btrfs&lt;/code&gt;, &lt;code&gt;zfs&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;我自己是沒有詳細研究所有 Storage Driver 的優劣就是  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://docs.docker.com/engine/userguide/storagedriver/overlayfs-driver/"&gt;Use the OverlayFS storage driver | Docker Documentation&lt;/a&gt;  &lt;ul&gt;
&lt;li&gt;這篇官方文件則講述怎麼把 Storage Driver 設定成 &lt;code&gt;overlay&lt;/code&gt; 和 &lt;code&gt;overlay2&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;建議是能用 &lt;code&gt;overlay2&lt;/code&gt; 就別用 &lt;code&gt;overlay&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;也講了 &lt;code&gt;overlay&lt;/code&gt; 和 &lt;code&gt;overlay2&lt;/code&gt; 的運作原理，還有效能和限制方面的部份  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;h2&gt;參考來源&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Docker#Storage_driver"&gt;Docker - ArchWiki&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://docs.docker.com/engine/userguide/storagedriver/overlayfs-driver/"&gt;Use the OverlayFS storage driver | Docker Documentation&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://docs.docker.com/engine/userguide/storagedriver/selectadriver/"&gt;Select a storage driver | Docker Documentation&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">m157q</dc:creator><pubDate>Wed, 17 Jan 2018 05:05:02 +0800</pubDate><guid isPermaLink="false">tag:blog.m157q.tw,2018-01-16:posts/2018/01/16/change-docker-storage-driver-from-devicemapper-to-overlay2-to-free-your-disk-space-on-arch-linux/</guid><category>Docker</category><category>devicemapper</category><category>overlayFS</category><category>Arch Linux</category><category>2018 iT 邦幫忙鐵人賽</category></item><item><title>解決 Arch Linux 上 gcin 2.8.5-2 無法在 Qt 5.9.x 以後的應用程式中執行的問題</title><link>https://blog.m157q.tw/posts/2018/01/04/solution-for-gcin-2-8-5-2-cannot-run-in-application-using-qt-after-5-9-x-on-arch-linux/</link><description>&lt;h2&gt;TL;DR&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://hyperrate.com/thread.php?tid=33785"&gt;在基於較新版qt 5.9.1的軟體中無法輸入中文&lt;/a&gt;  &lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;前言&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://github.com/qutebrowser/qutebrowser"&gt;qutebrowser&lt;/a&gt; 是一款以 Vim 操作流程為主、基於 PyQt5 上開發的的輕量化瀏覽器（有點類似 &lt;a href="https://bitbucket.org/portix/dwb"&gt;dwb&lt;/a&gt;）。2017 年中的時候就知道這款瀏覽器了，但沒有特別強烈的需求，因為我在使用 Firefox 或 Chromium 的時候都有安裝 Vimium 這個套件，所以可以做到一樣的事。  &lt;/p&gt;
&lt;p&gt;2017 年後半從 Firefox 55.0 開始，使用 Quantum 之後，我就從 Chromium 又跳回 Firefox 的懷抱，但接近 2017 年年底的時候，這篇文章：&lt;a href="https://sircmpwn.github.io/2017/12/16/Firefox-is-on-a-slippery-slope.html"&gt;Firefox is on a slippery slope | Drew DeVault’s Blog&lt;/a&gt;，講到了 Firefox 和美國的 NBCUniversal "合作"，為該公司新一季的電視劇 "Mr.Robot" 作宣傳。其手法是當你在瀏覽網頁的時候，如果裏面文字有和該劇相關的關鍵字的話，就會被倒過來顯示，而且也會在你造訪某些特定網站的時候，在你的 HTTP request 加入特定的 Header。重點是這是在未經使用者同意就預設開啟的測試功能內，直接幫使用者安裝一個叫作 "Looking Glass" 的 plugin，而且如果你把它關掉的話，在下次更新 Firefox 的時候又會被自動開啟。  &lt;/p&gt;
&lt;p&gt;再者是，討論這個功能的 ticket 是被鎖定的，只有 Mozilla 內部的人可以看到。這是非常不尊重使用者的行為，尤其 Firefox 又總是以不追蹤使用者、自由的開源軟體自居。雖然 Mozilla 在幾天後發了篇道歉文：&lt;a href="https://blog.mozilla.org/firefox/update-looking-glass-add/"&gt;Update: Looking Glass Add-on | The Firefox Frontier&lt;/a&gt;，但這件事還是讓滿多人留下不好的印象的，畢竟這代表專案主導人不尊重使用者，難保之後不會又發生。  &lt;/p&gt;
&lt;p&gt;剛好這篇文章的作者有提到他已經換到 qutebrowser 一陣子了，覺得還不錯用。剛好我也有在考慮要不要換過去使用，因為用了 Firefox 一陣子，雖然有比以前快，但還是常常會 crash，而且貌似也有 Memory Leak 的問題，常常用了一陣子記憶體就會愈用愈多，得重開才能解決。所以今天就下定決心拿 qutebrowser 來當預設的瀏覽器。  &lt;/p&gt;
&lt;p&gt;有機會的話可能會寫篇關於 qutebrowser 的介紹文，因為預設的 qutebrowser 其實不太好用，我花了點時間調整了設定才覺得比較能用。但這篇文章是要紀錄我在 Arch Linux 上安裝了基於 Qt5 開發的 qutebrowser 後，無法在其中使用 gcin 輸入法打中文字的問題。  &lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;正文&lt;/h2&gt;
&lt;p&gt;這篇應該只有在 Arch Linux 上的使用者可能會遇到，解法是在 gcin 論壇的這個討論串看到的：&lt;a href="https://hyperrate.com/thread.php?tid=33785"&gt;在基於較新版qt 5.9.1的軟體中無法輸入中文&lt;/a&gt;。  &lt;/p&gt;
&lt;p&gt;先附上發生 bug 的軟體版本：  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;gcin 2.8.5-2  &lt;/li&gt;
&lt;li&gt;Qt 5.10.0  &lt;/li&gt;
&lt;li&gt;qutebrowser v1.0.4  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;步驟：  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;先到 &lt;a href="https://git.archlinux.org/svntogit/packages.git/tree/trunk?h=packages/gcin"&gt;https://git.archlinux.org/svntogit/packages.git/tree/trunk?h=packages/gcin&lt;/a&gt; 把要 build &lt;code&gt;gcin&lt;/code&gt; 需要的檔案都抓下來，開個資料夾放這些檔案。  &lt;/li&gt;
&lt;li&gt;進到該資料夾內，根據討論串裡提到的解法修改 &lt;code&gt;PKGBUILD&lt;/code&gt;，加上這個 patch，&lt;a href="/files/solution-for-gcin-2-8-5-2-cannot-run-in-application-using-qt-after-5-9-x-on-arch-linux/qt-5.9.patch"&gt;這裡附上 patch 的純文字檔連結&lt;/a&gt;：  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gh"&gt;diff --git a/gcin/trunk/PKGBUILD b/gcin/trunk/PKGBUILD  &lt;/span&gt;
&lt;span class="gh"&gt;index ca08fcb57f3..7048c13411d 100644  &lt;/span&gt;
&lt;span class="gd"&gt;--- a/gcin/trunk/PKGBUILD  &lt;/span&gt;
&lt;span class="gi"&gt;+++ b/gcin/trunk/PKGBUILD  &lt;/span&gt;
&lt;span class="gu"&gt;@@ -39,6 +39,12 @@ prepare() {  &lt;/span&gt;
         -e &amp;#39;/^MODVERSION=/a INCS+=-I/usr/include/qt/QtGui/$(MODVERSION) -I/usr/include/qt/QtCore/$(MODVERSION)&amp;#39; \  
         -i qt5-im/Makefile  

&lt;span class="gi"&gt;+    # Patch to make gcin work in qt &amp;gt;= 5.9.x  &lt;/span&gt;
&lt;span class="gi"&gt;+    # ref: &amp;lt;https://hyperrate.com/thread.php?tid=33785&amp;gt;  &lt;/span&gt;
&lt;span class="gi"&gt;+      sed \  &lt;/span&gt;
&lt;span class="gi"&gt;+          -e &amp;#39;s/org.qt-project.Qt.QPlatformInputContextFactoryInterface/&amp;amp;.5.1/&amp;#39; \  &lt;/span&gt;
&lt;span class="gi"&gt;+          -i qt5-im/gcin-qt5.h.in  &lt;/span&gt;
&lt;span class="gi"&gt;+  &lt;/span&gt;
     # FS#45732  
     patch -p1 -i ../qt-5.5.patch  
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;在該資料夾內下 &lt;code&gt;makepkg -s&lt;/code&gt; 這個指令，就會開始 build gcin  &lt;/li&gt;
&lt;li&gt;build 好之後應該會出現 &lt;code&gt;gcin-2.8.5-2-x86_64.pkg.tar.xz&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;使用 &lt;code&gt;sudo pacman -U gcin-2.8.5-2-x86_64.pkg.tar.xz&lt;/code&gt; 來安裝 patch 過後的 gcin  &lt;/li&gt;
&lt;li&gt;使用 &lt;code&gt;qtplugininfo /usr/lib/qt/plugins/platforminputcontexts/libgcinplatforminputcontextplugin.so&lt;/code&gt; 來檢查  &lt;ul&gt;
&lt;li&gt;如果沒問題的話應該會得到下面這樣的輸出：  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ qtplugininfo /usr/lib/qt/plugins/platforminputcontexts/libgcinplatforminputcontextplugin.so  
IID &lt;span class="s2"&gt;&amp;quot;org.qt-project.Qt.QPlatformInputContextFactoryInterface.5.1&amp;quot;&lt;/span&gt; Qt &lt;span class="m"&gt;5&lt;/span&gt;.10.0 &lt;span class="o"&gt;(&lt;/span&gt;debug&lt;span class="o"&gt;)&lt;/span&gt;  
User Data: &lt;span class="o"&gt;{&lt;/span&gt;  
    &lt;span class="s2"&gt;&amp;quot;Keys&amp;quot;&lt;/span&gt;: &lt;span class="o"&gt;[&lt;/span&gt;  
        &lt;span class="s2"&gt;&amp;quot;gcin&amp;quot;&lt;/span&gt;  
    &lt;span class="o"&gt;]&lt;/span&gt;  
&lt;span class="o"&gt;}&lt;/span&gt;  
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;重新開啟 gcin  &lt;/li&gt;
&lt;li&gt;重開 qutebrowser  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;這樣應該就沒問題了。  &lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;結論&lt;/h2&gt;
&lt;p&gt;總之，我發了一個 bug report: &lt;a href="https://bugs.archlinux.org/task/56949"&gt;FS#56949 : [gcin] gcin 2.8.5-2 cannot run in qutebrowser v1.0.4&lt;/a&gt;，希望這個 patch 會被加進去，這樣之後更新應該就沒問題了。  &lt;/p&gt;
&lt;p&gt;好像有點久沒有自己 build package 了啊，原本打算用 &lt;code&gt;abs&lt;/code&gt;，然後才想起來 &lt;code&gt;abs&lt;/code&gt; 已經被 deprecated 了：&lt;a href="https://www.archlinux.org/news/deprecation-of-abs/"&gt;Arch Linux - News: Deprecation of ABS tool and rsync endpoint&lt;/a&gt;  &lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;參考來源&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/qutebrowser/qutebrowser"&gt;GitHub - qutebrowser/qutebrowser: A keyboard-driven, vim-like browser based on PyQt5.&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://bitbucket.org/portix/dwb"&gt;portix / dwb — Bitbucket&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://sircmpwn.github.io/2017/12/16/Firefox-is-on-a-slippery-slope.html"&gt;Firefox is on a slippery slope | Drew DeVault’s Blog&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://blog.mozilla.org/firefox/update-looking-glass-add/"&gt;Update: Looking Glass Add-on | The Firefox Frontier&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://hyperrate.com/thread.php?tid=33785"&gt;在基於較新版qt 5.9.1的軟體中無法輸入中文&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">m157q</dc:creator><pubDate>Fri, 05 Jan 2018 01:21:00 +0800</pubDate><guid isPermaLink="false">tag:blog.m157q.tw,2018-01-04:posts/2018/01/04/solution-for-gcin-2-8-5-2-cannot-run-in-application-using-qt-after-5-9-x-on-arch-linux/</guid><category>Arch Linux</category><category>Qt5</category><category>qutebrowser</category><category>gcin</category><category>2018 iT 邦幫忙鐵人賽</category></item><item><title>ERROR: One or more PGP signatures could not be verified</title><link>https://blog.m157q.tw/posts/2017/11/27/one-or-more-pgp-signatures-could-not-be-verified/</link><description>&lt;h2&gt;TL;DR&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;gpg --keyserver keys.gnupg.net --recv-keys ${PGP_PUBLIC_KEY}&lt;/code&gt;  &lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;Preface&lt;/h2&gt;
&lt;p&gt;Encountered this error while installing &lt;code&gt;firefox-nightly&lt;/code&gt; from AUR  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;==&amp;gt; Verifying source file signatures with gpg...  
    20171127-firefox-59.0a1.en-US.linux-x86_64.tar.bz2 ... FAILED (unknown public key BBBEBDBB24C6F355)  
==&amp;gt; ERROR: One or more PGP signatures could not be verified!  
==&amp;gt; ERROR: Makepkg was unable to build firefox-nightly.  
&lt;/pre&gt;&lt;/div&gt;


&lt;hr /&gt;
&lt;h2&gt;Solution&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;gpg --keyserver keys.gnupg.net --recv-keys BBBEBDBB24C6F355&lt;/code&gt;  &lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://bbs.archlinux.org/viewtopic.php?id=191954"&gt;One or more PGP signatures could not be verified! / AUR Issues, Discussion &amp;amp; PKGBUILD Requests / Arch Linux Forums&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="http://allanmcrae.com/2015/01/two-pgp-keyrings-for-package-management-in-arch-linux/"&gt;Two PGP Keyrings for Package Management in Arch Linux | Allan McRae&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">m157q</dc:creator><pubDate>Mon, 27 Nov 2017 14:56:38 +0800</pubDate><guid isPermaLink="false">tag:blog.m157q.tw,2017-11-27:posts/2017/11/27/one-or-more-pgp-signatures-could-not-be-verified/</guid><category>Arch Linux</category><category>makepkg</category><category>yaourt</category><category>AUR</category><category>PGP</category></item><item><title>用 broadcom-wl-dkms 讓 BCM4360 [14e4:43a0] (rev 03) 能順利在 Arch Linux 中使用</title><link>https://blog.m157q.tw/posts/2017/10/31/make-bcm4360-14e4-43a0-rev-03-work-on-arch-linux-with-broadcom-wl-dkms/</link><description>&lt;h2&gt;TL;DR&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;sudo pacman -S broadcom-wl-dkms&lt;/code&gt; should be good.  &lt;/p&gt;
&lt;p&gt;If you are using &lt;code&gt;wicd&lt;/code&gt; like me,&lt;br /&gt;
remember to &lt;a href="https://wiki.archlinux.org/index.php/wicd#Initial_setup"&gt;close other network management daemon&lt;/a&gt; like:  &lt;/p&gt;
&lt;p&gt;&lt;code&gt;systemctl stop dhcpcd&lt;/code&gt;&lt;br /&gt;
&lt;code&gt;systemctl disable dhcpcd&lt;/code&gt;&lt;br /&gt;
&lt;code&gt;systemctl stop NetworkManager&lt;/code&gt;&lt;br /&gt;
&lt;code&gt;systemctl disable NetworkManager&lt;/code&gt;  &lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;正文&lt;/h2&gt;
&lt;p&gt;之前好一陣子都是一直用 &lt;code&gt;broadcom-wl-dkms-248-6.30.223.248-1-x86_64&lt;/code&gt; 撐著，&lt;br /&gt;
簡單來說就是之前從 AUR 上 download 這版的 &lt;code&gt;broadcom-wl-dkms&lt;/code&gt; 下來後，&lt;br /&gt;
之後每次更新用新版的都有問題，&lt;br /&gt;
就得一直 down grade 下來&lt;br /&gt;
所以我就一直留著舊版的以備不時之需，&lt;br /&gt;
救了我好幾次。  &lt;/p&gt;
&lt;p&gt;而且因為 dkms 每次在 kernel upgrade 之後，&lt;br /&gt;
都會幫你重新 build 一次，&lt;br /&gt;
基本上不用理他，&lt;br /&gt;
所以我後來也把原本有從 AUR 上裝的 &lt;code&gt;broadcom-wl-dkms&lt;/code&gt; 刪掉了，&lt;br /&gt;
之後自動更新就不會需要一直 down grade。  &lt;/p&gt;
&lt;p&gt;直到昨天升上 &lt;code&gt;Linux 4.13.9-1-ARCH&lt;/code&gt;，&lt;br /&gt;
dkms 無法成功 build &lt;code&gt;broadcom-wl-dkms-248-6.30.223.248-1-x86_64&lt;/code&gt;，&lt;br /&gt;
我在升級 kernel 的時候又沒去注意 kernel upgrade 的訊息，&lt;br /&gt;
於是我的無線網卡在重開機之後就消失在 &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;iwconfig&lt;/code&gt; 的 output 了。  &lt;/p&gt;
&lt;p&gt;以前就遇過好幾次這狀況了，&lt;br /&gt;
所以並沒有特別的驚慌。&lt;br /&gt;
想說來試裝看看新版的 &lt;code&gt;broadcom-wl-dkms&lt;/code&gt;，&lt;br /&gt;
才發現&lt;a href="https://www.archlinux.org/packages/community/x86_64/broadcom-wl-dkms/"&gt;已經從 AUR 被移到 community repository 了&lt;/a&gt;，&lt;br /&gt;
用 &lt;code&gt;sudo pacman -S broadcom-wl-dkms&lt;/code&gt; 安裝後，&lt;br /&gt;
看了一下訊息，&lt;br /&gt;
看起來有成功 build 並安裝。  &lt;/p&gt;
&lt;p&gt;重開機之後，&lt;br /&gt;
無線網卡出現了，&lt;br /&gt;
也搜尋得到 SSID，&lt;br /&gt;
但就是連不上。&lt;br /&gt;
卡了很久，&lt;br /&gt;
想說回來看看以前自己寫的&lt;a href="/posts/2015/09/10/install-arch-linux-on-macbook-air-mid-2013/"&gt;這篇文章&lt;/a&gt;會不會有什麼端倪，&lt;br /&gt;
結果就看到了&lt;br /&gt;
「記得 disable dhcpcd，錯誤訊息也看不出啥端倪，就是在這卡了很久。」&lt;br /&gt;
頓時覺得似曾相似。  &lt;/p&gt;
&lt;p&gt;&lt;code&gt;systemctl status dhcpcd&lt;/code&gt; 是 inactive 的，&lt;br /&gt;
又想到了 &lt;code&gt;NetworkManager&lt;/code&gt; 也會影響到，&lt;br /&gt;
&lt;code&gt;systemctl status NetworkManager&lt;/code&gt; 是 running...&lt;br /&gt;
靠，怎麼又被誰打開了，&lt;br /&gt;
&lt;code&gt;systemctl stop NetworkManager&lt;/code&gt; 之後果然就正常了。&lt;br /&gt;
因為之前沒有紀錄錯誤訊息導致我這次找超久，&lt;br /&gt;
所以這次就來紀錄一下這些在 &lt;code&gt;dmesg&lt;/code&gt; 會看到的錯誤訊息吧。&lt;br /&gt;
（同樣的錯誤訊息也有新增在之前的文章了。）  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[ 6677.574915] ERROR @wl_notify_scan_status :  
[ 6677.574919] wlp3s0 Scan_results error (-22)  
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[ 6560.346608] ERROR @wl_cfg80211_scan :  
[ 6560.346611] WLC_SCAN error (-22)  
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[ 6467.860408] ERROR @wl_notify_scan_status :  
[ 6467.860413] wlp3s0 Scan_results error (-22)  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;也因為這次的遭遇而誕生了這篇新文章，&lt;br /&gt;
畢竟網路上跟 Arch Linux 相關的資源實在有點少，&lt;br /&gt;
拿這些錯誤訊息去 Google 看到跟 Arch Linux 相關的，&lt;br /&gt;
大多是 DELL 筆電 (XPS 13, Vostro 3560) 的問題，&lt;br /&gt;
&lt;a href="https://bbs.archlinux.org/viewtopic.php?pid=1216302#p1216302"&gt;解法是要用 Fn+PrtScrn 把 Wireless 開啟&lt;/a&gt;。&lt;br /&gt;
第二多的就是跟 Ubuntu 相關的，&lt;br /&gt;
&lt;a href="https://askubuntu.com/a/60395"&gt;有篇超級詳細的回答已經紀錄在這了&lt;/a&gt;  &lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;小確幸&lt;/h2&gt;
&lt;p&gt;不得不說一下，&lt;br /&gt;
這種幾年前自己寫的筆記，&lt;br /&gt;
救了現在的自己的感覺，&lt;br /&gt;
真的是會讓人有  &lt;/p&gt;
&lt;p&gt;「啊，還好當初有花時間紀錄下來。」  &lt;/p&gt;
&lt;p&gt;的那種欣慰又安全的感覺啊。  &lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;題外話: DKMS&lt;/h2&gt;
&lt;p&gt;也是這次查解法的過程看到&lt;a href="https://bbs.archlinux.org/viewtopic.php?pid=1370568#p1370568"&gt;這篇文章&lt;/a&gt;才知道，&lt;br /&gt;
其實 Arch Linux 現在每次 kernel upgrade 幫你做的事大致上就是  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;dkms remove &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;KERNEL_MODULE_NAME&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt; -v &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;KERNEL_MODULE_VERSION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt; -k &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;CURRENT_KERNEL_VERSION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;  
dkms install &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;KERNEL_MODULE_NAME&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt; -v &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;KERNEL_MODULE_VERSION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt; -k &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;NEW_KERNEL_VERSION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;實際大概長的像這樣  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;dkms remove broadcom-wl -v 6.30.223.271-15 -k 4.13.8-1-ARCH  
dkms install broadcom-wl -v 6.30.223.271-15 -k 4.13.9-1-ARCH  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;至於 &lt;code&gt;dkms install&lt;/code&gt; == &lt;code&gt;dkms build&lt;/code&gt; + &lt;code&gt;dkms add&lt;/code&gt;&lt;br /&gt;
這個可以 &lt;code&gt;man dkms&lt;/code&gt; 就可以看到了  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;install [module/module-version] [-k kernel/arch] [/path/to/driver.rpm]  

    Installs  a  built module/version combo onto the kernel it was built for.  
    If the kernel option is not specified it assumes the currently running kernel.  
    If the module has not been built, dkms will try to build it.  
    If the module has  not been added, dkms will try to add it.  
    In both cases, the install command can then take the same arguments as the build or add commands.  
    If you pass a .rpm file, dkms will try to install that file with rpm -Uvh ,  
    and it will perform an autoinstall action to mesure that everything is built for your kernel if the RPM installed sucess‐  
    fully.  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;這只是個人粗淺的理解，&lt;br /&gt;
如果理解有誤的話還請不吝指教。  &lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">m157q</dc:creator><pubDate>Tue, 31 Oct 2017 17:10:43 +0800</pubDate><guid isPermaLink="false">tag:blog.m157q.tw,2017-10-31:posts/2017/10/31/make-bcm4360-14e4-43a0-rev-03-work-on-arch-linux-with-broadcom-wl-dkms/</guid><category>Arch Linux</category><category>Broadcom</category><category>Wireless</category><category>MacBook Air</category></item><item><title>pacman -Rdd gcc-multilib gcc-libs-multilib</title><link>https://blog.m157q.tw/posts/2017/09/17/pacman-rdd-gcc-multilib-gcc-libs-multilib/</link><description>&lt;h3&gt;Preface&lt;/h3&gt;
&lt;p&gt;If you've installed &lt;code&gt;gcc-libs-multilib&lt;/code&gt; and &lt;code&gt;gcc-multilib&lt;/code&gt; in your Arch Linux,&lt;br /&gt;
you might cannot &lt;code&gt;$ sudo pacman -Syu&lt;/code&gt; because sometimes they will conflict with &lt;code&gt;gcc-libs&lt;/code&gt; and &lt;code&gt;gcc&lt;/code&gt; in &lt;code&gt;[core]&lt;/code&gt; repository.  &lt;/p&gt;
&lt;p&gt;You have two choices:  &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Don't install &lt;code&gt;gcc&lt;/code&gt; and &lt;code&gt;gcc-libs&lt;/code&gt; to avoid the conflict, and wait until &lt;code&gt;gcc-multilib&lt;/code&gt; and &lt;code&gt;gcc-libs-multilib&lt;/code&gt; have new verisons.  &lt;ul&gt;
&lt;li&gt;Remove them from the list of packaged to install of this packages upgrade.  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Force remove &lt;code&gt;gcc-multilib&lt;/code&gt; and &lt;code&gt;gcc-libs-multilib&lt;/code&gt; with &lt;code&gt;$ sudo pacman -Rdd gcc-multilib gcc-libs-multilib&lt;/code&gt;.  &lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;If you do the latter, and break your &lt;code&gt;pacman&lt;/code&gt;, then this blog post may be your salvation.&lt;br /&gt;
I just encountered this situation and that's why I wrote down this blog post.  &lt;/p&gt;
&lt;hr /&gt;
&lt;h3&gt;Error Message&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;pacman: error while loading shared libraries: libstdc++.so.6: cannot open shared object file: No such file or directory  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr /&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ldd &lt;span class="k"&gt;$(&lt;/span&gt;which pacman&lt;span class="k"&gt;)&lt;/span&gt;  

...  

libstdc++.so.6 &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; not found  
libgcc_s.so.1 &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; not found  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;These two share objects are gone which make &lt;code&gt;pacman&lt;/code&gt; broken.  &lt;/p&gt;
&lt;hr /&gt;
&lt;h3&gt;Solution&lt;/h3&gt;
&lt;p&gt;Copy &lt;code&gt;libstdc++.so.6&lt;/code&gt; and &lt;code&gt;libgcc_s.so.1&lt;/code&gt; from other Arch Linux computer with same architecture.  &lt;/p&gt;
&lt;p&gt;If you have nothing to copy from, I've backed up these two shared objects with x86_64  architecutre below.  &lt;/p&gt;
&lt;p&gt;(If somehow you cannot download these two files or these doesn't work for you,&lt;br /&gt;
you can try the following link in the reference part.&lt;br /&gt;
Someone also backed up these two files and uploaded them in the reply of the forum thread.)  &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Download these 2 share objects:  &lt;ul&gt;
&lt;li&gt;&lt;a href="/files/pacman-rdd-gcc-multilib-gcc-libs-multilib/libstdc++.so.6"&gt;libstdc++.so.6&lt;/a&gt;  &lt;ul&gt;
&lt;li&gt;sha256sum: 30c1b6ae5936f5f4afdba39f44465efc84422e957db13580e1891f081b615d0e  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="/files/pacman-rdd-gcc-multilib-gcc-libs-multilib/libgcc_s.so.1"&gt;libgcc_s.so.1&lt;/a&gt;  &lt;ul&gt;
&lt;li&gt;sha256sum: 95298eef28aca7cef5b28d8388ef0ea3721add9e7c19df74054d7b1c41bcca2e  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$ sudo mv libstdc++.so.6 libgcc_s.so.1 /usr/lib&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;$ sudo pacman -S --force gcc gcc-libs&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;Make sure you use &lt;code&gt;--force&lt;/code&gt; option, or pacman will complain about these two files are conflict.  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr /&gt;
&lt;h3&gt;Reference&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.reddit.com/r/archlinux/comments/6e2no7/pacman_error_libstdcso6/"&gt;pacman error: libstdc++.so.6 : archlinux&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">m157q</dc:creator><pubDate>Sun, 17 Sep 2017 17:50:32 +0800</pubDate><guid isPermaLink="false">tag:blog.m157q.tw,2017-09-17:posts/2017/09/17/pacman-rdd-gcc-multilib-gcc-libs-multilib/</guid><category>Arch Linux</category><category>pacman</category><category>gcc</category><category>gcc-libs</category></item><item><title>Install Arch Linux on MacBook Air Mid 2013</title><link>https://blog.m157q.tw/posts/2015/09/10/install-arch-linux-on-macbook-air-mid-2013/</link><description>&lt;hr /&gt;
&lt;blockquote&gt;
&lt;p&gt;使用上遇到問題，才有動力去解決、改善、貢獻並回饋程式碼到上游。  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;警告: 把 OS X 砍掉的話，之後要更新 firmware 必須使用有安裝 OS X 的外接硬碟上開機才能更新。&lt;/code&gt;  &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;以下這段是一堆廢話，講了我為什麼決定要把 OS X 砍了然後灌 Linux 在 MacBook Air 上&lt;br /&gt;
不想看的可以直接跳過  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;改用 OS X 的這兩年，&lt;br /&gt;
也不是說就完全沒用 Linux 了，&lt;br /&gt;
舊的筆電退役成 Server 架在宿舍裡，&lt;br /&gt;
一個不用桌面環境的 Linux ，&lt;br /&gt;
使用起來基本上是不會遇到太多問題的。&lt;br /&gt;
而 OS X 的確遇到使用上的問題減少了。&lt;br /&gt;
用起來的確跟當初想的一樣，&lt;br /&gt;
是個問題比較沒那麼多的 UNIX-like System&lt;br /&gt;
但同時也在不知不覺中漸漸喪失了解決問題的能力，&lt;br /&gt;
就好像一把兩年前就不再磨的刀劍，愈發鈍鏽。&lt;br /&gt;
當初會買 MacBook Air 而不選擇 UltraBook 的原因&lt;br /&gt;
主要是因為價錢、續航力、重量都是 MacBook Air 勝出，&lt;br /&gt;
當然之後在使用上，我也對重量和續航力很滿意，&lt;br /&gt;
但其實在使用 OS X 上也遇過許多無法接受的問題，有些妥協了，有些沒有&lt;br /&gt;
例如：  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;原生的工具都非常老舊，舊版本代表著很多問題，無論是資安或是有無新功能。這對於一個從使用 Rolling Release 的 Arch Linux user 來說真的很不習慣。  &lt;ul&gt;
&lt;li&gt;骨灰級的 Bash 真的令我印象深刻，如果沒有 Homebrew 的話，我肯定無法用這麼久，感謝 &lt;code&gt;mxcl&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;接網路線跟螢幕線得額外花錢買轉接頭  &lt;ul&gt;
&lt;li&gt;兩個加起來新台幣 1,600 左右。恩，我跟很多人一樣都買了。  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;OS X 10.9 以前的視窗放大真的很雞肋和令人哭笑不得，放大後不會佔滿整個桌面，有時候甚至比按完放大前更小。  &lt;ul&gt;
&lt;li&gt;在 OS X 10.10 後，放大功能直接改成全螢幕了。恩，不意外，我在 10.9 以前早就都用全螢幕了。  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;雙螢幕在 OS X 10.10 仍然有一個我常常踩到的詭異Bug，如果有程式被丟到外接螢幕那邊，在不拔掉螢幕線的情況下，把螢幕闔上進入休眠，接著把螢幕線拔掉，然後喚醒 Mac，這時候就會發現被丟到外接螢幕的應用程式仍然被認為是在外接螢幕的範圍。但因為早就沒有外接螢幕了，所以即便程式仍然在執行，使用者也根本看不到畫面，重點是重新執行該程式也無法解決這問題，只能登出、重開機或是重新接上外接螢幕在電腦喚醒的情況下拔掉螢幕線，或是把該程式拉回原生螢幕，才有辦法解決。  &lt;ul&gt;
&lt;li&gt;我不確定 Reproduce 的機率是不是 100%，但就是偶爾會遇到，而寫這篇文章的時候已經把我手邊唯一的 OS X 砍了，所以也無從驗證。  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;系統介面內建中文字型不好看，要改也很難改。  &lt;ul&gt;
&lt;li&gt;還好 OS X 10.9 以前有 TCFail 能用，到了 OS X 10.10 只能去改系統檔案設定，而換成了我想用的字型以後，內建的中文輸入法就會掛掉，只好又改回原本的字型。  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;輸入法也是個問題  &lt;ul&gt;
&lt;li&gt;剛用 OS X 10.8 的時候就聽很多人說內建的中文輸入法不是很好用，所以很多人都裝開源的香草或是小麥注音，我本身也是注音輸入法的使用者，但我用了以後還是不太習慣(恩，當時明明用不習慣，卻沒有跳下去幫忙貢獻)。後來找到另一款開源的中州韻輸入法(RIME)，是對岸的中國人&lt;a href="https://github.com/lotem"&gt;佛振&lt;/a&gt;開發的，在 Windows, Linux, Mac 上都能使用。裝來用以後發現還不錯用，自訂性蠻強大的，由於在用 gcin 時，我習慣把選字鍵從常人慣用的 1234567890 改成 asdfghjkl; 以減少手指移動的距離，這款輸入法也能做到，於是就用了。(至於後來關於 dvorak 跟拼音輸入法又是另一個故事了)  &lt;/li&gt;
&lt;li&gt;到了 OS X 10.10 之後，不知怎的，非官方的中文輸入法都變得超級慢，慢到無法接受，於是又換回不是很好用的官方中文輸入法。(恩，又是一個妥協，沒去追根究底找出為什麼變得這麼慢的原因)  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;一不小心好像離題寫了太多關於 OS X 的部份。&lt;br /&gt;
Anyway, 因為種種問題加上這次 COSCUP 的助力，&lt;br /&gt;
還是想回歸到 Linux Desktop Environment 的懷抱，&lt;br /&gt;
促使我把 Arch Linux 灌在我的 MacBook Air 2013 13' 上，&lt;br /&gt;
以下是紀錄。  &lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;以下流程皆在 &lt;code&gt;MacBookAir6,2 (Macbook Air mid 2013)&lt;/code&gt; 上進行&lt;br /&gt;
不同 model 的 MacBook 會有不同的問題&lt;br /&gt;
詳見 &lt;a href="https://wiki.archlinux.org/index.php/MacBook#Model-specific_information"&gt;https://wiki.archlinux.org/index.php/MacBook#Model-specific_information&lt;/a&gt;&lt;br /&gt;
由於我是採用把 OS X 洗掉直接裝 Arch Linux 的方式，並不是雙系統&lt;br /&gt;
所以安裝方式與一般的 Arch Linux 安裝並無太大不同，&lt;br /&gt;
故本篇文章會著重在裝好之後的一些調整  &lt;/p&gt;
&lt;p&gt;如果有人想灌成 Ubuntu 的話，可以參考 &lt;a href="https://help.ubuntu.com/community/MacBookAir"&gt;https://help.ubuntu.com/community/MacBookAir&lt;/a&gt;&lt;br /&gt;
(但上面最新的資料似乎只有到 2013 年的機種就是，當然也歡迎勇者測試之後貢獻)  &lt;/p&gt;
&lt;p&gt;&lt;code&gt;警告：MacbookAir6,2 的網卡在 Linux 上"有可能"不被支援(需視網卡型號)，  
所以可能得另購 USB 無線網卡才有無線網路  
詳情請見底下關於 Wi-Fi 的部份&lt;/code&gt;  &lt;/p&gt;
&lt;p&gt;&lt;code&gt;If you want to mute the MacBook firmware boot sound,  
be sure you mute the volume of the MacBook before you eliminating OS X.&lt;/code&gt;  &lt;/p&gt;
&lt;h1&gt;Install Arch Linux Only (No OS X Dual Boot) on MacBook Air&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;WARNING: After erasing OS X,  
We can only update the MacBook Air firmware via the external drive which has already installed OS X.&lt;/code&gt;  &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Make Arch Linux bootable Live USB  &lt;ul&gt;
&lt;li&gt;Go to &lt;a href="https://www.archlinux.org/download/"&gt;https://www.archlinux.org/download/&lt;/a&gt; and download the newest Arch Linux iso.  &lt;/li&gt;
&lt;li&gt;Plug in a USB drive  &lt;/li&gt;
&lt;li&gt;use &lt;code&gt;diskutil list&lt;/code&gt; to find the USB dirve &lt;code&gt;/dev/sdX&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;dd if=$(path to arch linux iso) of=/dev/rsdX bs=1m&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;use raw disk (/dev/rsdX) make this quicker.  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Go to AppStore for updating OS X to the newest version  &lt;ul&gt;
&lt;li&gt;After the first update, reboot, and check for newest update again  &lt;/li&gt;
&lt;li&gt;Make sure it's newest update, espcially the firmware udpate  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Erase OS X  &lt;ul&gt;
&lt;li&gt;Reboot MacBook Air  &lt;/li&gt;
&lt;li&gt;Press Command + R to enter the Reinstall mode  &lt;/li&gt;
&lt;li&gt;Choose DiskUtility and Erase the entire disk  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Entering Arch Linux Live USB installation  &lt;ul&gt;
&lt;li&gt;Reboot MacBook Air  &lt;/li&gt;
&lt;li&gt;Press alt/option key for entering EFI bootloader  &lt;/li&gt;
&lt;li&gt;Choose EFI USB  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Install Arch Linux (Just like the normal installation with a little different)  &lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Beginners'_guide"&gt;Beginners' guide - ArchWiki&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;Important =&amp;gt; &lt;a href="https://wiki.archlinux.org/index.php/MacBook#Arch_Only_Installation"&gt;MacBook - ArchWiki&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;Need to be aware about the EFI related options  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr /&gt;
&lt;blockquote&gt;
&lt;p&gt;底下其實有些調整不是那麼必要&lt;br /&gt;
可能直接 &lt;code&gt;sudo pacman -S gnome-control-center&lt;/code&gt; 就可以解掉許多問題&lt;br /&gt;
只是個人覺得 gnome 太肥，想要用些 light weight 的 packages&lt;br /&gt;
覺得麻煩的人可以直接裝個 gnome-control-center ，然後再視情況安裝需要的東西&lt;br /&gt;
應該可以節省一些時間  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;Post-Install&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/MacBook#Post-installation"&gt;https://wiki.archlinux.org/index.php/MacBook#Post-installation&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/General_recommendations"&gt;https://wiki.archlinux.org/index.php/General_recommendations&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;Install &lt;a href="https://aur.archlinux.org/packages/yaourt/"&gt;yaourt&lt;/a&gt;  &lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo mkdir /var/cache/yaourt&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;save tarball to &lt;code&gt;/var/cache/yaourt&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;/etc/yaourtrc  
---  
EXPORT=1  
EXPORTDIR=&amp;quot;/var/cache/yaourt&amp;quot;  
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Configs&lt;/h2&gt;
&lt;h3&gt;dotfiles&lt;/h3&gt;
&lt;p&gt;Download my dotfiles on &lt;a href="https://github.com/M157q/dotfiles"&gt;https://github.com/M157q/dotfiles&lt;/a&gt;  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git clone https://github.com/M157q/dotfiles  
&lt;span class="nb"&gt;cd&lt;/span&gt; dotfiles  
make install  
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Xorg&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S xcompmgr xorg-xrdb&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Xcompmgr"&gt;xcommpgr&lt;/a&gt;  &lt;ul&gt;
&lt;li&gt;for simple effect, like transparency in &lt;code&gt;guake&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/X_resources"&gt;xorg-xrdb&lt;/a&gt;  &lt;ul&gt;
&lt;li&gt;for &lt;code&gt;.Xresources&lt;/code&gt;, some config related to X Window  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Wi-Fi&lt;/h3&gt;
&lt;p&gt;不同型號的網卡會有不同的問題，這部份也需要多加注意。&lt;br /&gt;
光是參考 &lt;a href="https://wiki.archlinux.org/index.php/MacBook#Wi-Fi"&gt;https://wiki.archlinux.org/index.php/MacBook#Wi-Fi&lt;/a&gt; 可能不夠&lt;br /&gt;
必須再自行找些相關資料，我在這部份卡了一陣子。  &lt;/p&gt;
&lt;p&gt;先確認是哪張網卡&lt;br /&gt;
&lt;code&gt;MacBookAir6,2&lt;/code&gt; 沒意外的話應該都是 &lt;code&gt;BCM4360&lt;/code&gt; 這張&lt;br /&gt;
但還是有細節得注意  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ lspci -vnn &lt;span class="p"&gt;|&lt;/span&gt;grep &lt;span class="m"&gt;0280&lt;/span&gt;  
&lt;span class="m"&gt;03&lt;/span&gt;:00.0 Network controller &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;0280&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;: Broadcom Corporation BCM4360 &lt;span class="m"&gt;802&lt;/span&gt;.11ac Wireless Network Adapter &lt;span class="o"&gt;[&lt;/span&gt;14e4:43a0&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;rev &lt;span class="m"&gt;03&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;Broadcom BCM4360&lt;/code&gt; 這張網卡有兩種&lt;br /&gt;
一種是 &lt;code&gt;14e4:43a0&lt;/code&gt;, 另外一種是 &lt;code&gt;14e4:4360&lt;/code&gt;&lt;br /&gt;
根據 &lt;a href="https://wireless.wiki.kernel.org/en/users/Drivers/b43?highlight=%28b43%29#Supported_devices"&gt;https://wireless.wiki.kernel.org/en/users/Drivers/b43?highlight=%28b43%29#Supported_devices&lt;/a&gt;&lt;br /&gt;
&lt;code&gt;43a0&lt;/code&gt; 這張是被 wl 驅動程式支援的，所以如果是這張的話可以用無線網路&lt;br /&gt;
&lt;code&gt;4360&lt;/code&gt; 這張則是不被支援的，所以可能需要另外購買無線網卡&lt;br /&gt;
(我沒有親自測試過，如果有勇者或是有經驗的人歡迎回覆告知)  &lt;/p&gt;
&lt;p&gt;&lt;code&gt;43a0&lt;/code&gt; 的話照著底下的指令做應該就可以使用無線網路連網了 (kernel 為 Linux 4.1.5-1)  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;yaourt -S broadcom-wl-dkms&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;after installation, follow the postinstall instructions.  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S iw&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S wicd-gtk&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;==&amp;gt; You need to restart the dbus service after  
==&amp;gt; upgrading wicd.  
==&amp;gt; Disable networkmanager, dhcpcd or other networking  
==&amp;gt; utility and add &amp;#39;wicd&amp;#39; to your systemd configuration.  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;記得 &lt;code&gt;systemctl stop dhcpcd&lt;/code&gt;, &lt;code&gt;sytemctl disable dhcpcd&lt;/code&gt;,&lt;br /&gt;
&lt;code&gt;systemcl stop NetworkManager&lt;/code&gt;, &lt;code&gt;systemctl disable NetworkManager&lt;/code&gt;，&lt;br /&gt;
然後 &lt;code&gt;systemctl enable wicd&lt;/code&gt;，&lt;br /&gt;
&lt;code&gt;dhcpcd&lt;/code&gt; 或 &lt;code&gt;NetworkManager&lt;/code&gt; 都會跟 &lt;code&gt;wicd&lt;/code&gt; 衝突，&lt;br /&gt;
開著 &lt;code&gt;dhcpcd&lt;/code&gt; 或 &lt;code&gt;NetworkManager&lt;/code&gt; 的時候使用 &lt;code&gt;wicd&lt;/code&gt; 的話，&lt;br /&gt;
會無法使用無線網路連線，&lt;br /&gt;
錯誤訊息也看不出啥端倪，&lt;br /&gt;
我就是卡在這很久 Orz  &lt;/p&gt;
&lt;h4&gt;2017.10.31 更新&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Warning&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Running&lt;/span&gt; &lt;span class="n"&gt;multiple&lt;/span&gt; &lt;span class="n"&gt;network&lt;/span&gt; &lt;span class="n"&gt;managers&lt;/span&gt; &lt;span class="n"&gt;will&lt;/span&gt; &lt;span class="n"&gt;cause&lt;/span&gt; &lt;span class="n"&gt;problems&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt; &lt;span class="n"&gt;it&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="n"&gt;important&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;disable&lt;/span&gt; &lt;span class="n"&gt;all&lt;/span&gt; &lt;span class="n"&gt;other&lt;/span&gt; &lt;span class="n"&gt;network&lt;/span&gt; &lt;span class="n"&gt;management&lt;/span&gt; &lt;span class="n"&gt;daemons&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;  

&lt;span class="n"&gt;First&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;stop&lt;/span&gt; &lt;span class="n"&gt;all&lt;/span&gt; &lt;span class="n"&gt;previously&lt;/span&gt; &lt;span class="n"&gt;running&lt;/span&gt; &lt;span class="n"&gt;network&lt;/span&gt; &lt;span class="n"&gt;daemons&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;like&lt;/span&gt; &lt;span class="n"&gt;netctl&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;netcfg&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dhcpcd&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;NetworkManager&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;  

&lt;span class="n"&gt;Disable&lt;/span&gt; &lt;span class="n"&gt;any&lt;/span&gt; &lt;span class="n"&gt;existing&lt;/span&gt; &lt;span class="n"&gt;network&lt;/span&gt; &lt;span class="n"&gt;management&lt;/span&gt; &lt;span class="n"&gt;services&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;including&lt;/span&gt; &lt;span class="n"&gt;netctl&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;netcfg&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dhcpcd&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;and&lt;/span&gt; &lt;span class="n"&gt;networkmanager&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="n"&gt;Refer&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;Systemd&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="n"&gt;Using&lt;/span&gt; &lt;span class="n"&gt;units&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;  
&lt;span class="n"&gt;Note&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;You&lt;/span&gt; &lt;span class="n"&gt;might&lt;/span&gt; &lt;span class="n"&gt;need&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;stop&lt;/span&gt; &lt;span class="n"&gt;and&lt;/span&gt; &lt;span class="n"&gt;disable&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;network&lt;/span&gt; &lt;span class="n"&gt;daemon&lt;/span&gt; &lt;span class="n"&gt;instead&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="n"&gt;netctl&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;which&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;current&lt;/span&gt; &lt;span class="n"&gt;replacement&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;network&lt;/span&gt; &lt;span class="n"&gt;service&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="n"&gt;If&lt;/span&gt; &lt;span class="n"&gt;unsure&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="n"&gt;disabling&lt;/span&gt; &lt;span class="n"&gt;both&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;quote from &lt;a href="https://wiki.archlinux.org/index.php/wicd#Initial_setup"&gt;Wicd - ArchWiki&lt;/a&gt;  &lt;/p&gt;
&lt;p&gt;我猜不只 &lt;code&gt;wicd&lt;/code&gt;，&lt;br /&gt;
其他的 Network Daemon 應該也是同理，&lt;br /&gt;
不要讓他們彼此起衝突。  &lt;/p&gt;
&lt;p&gt;主要是因為我在這裡是使用 &lt;code&gt;wicd&lt;/code&gt;&lt;br /&gt;
所以如果沒有把 &lt;code&gt;dhcpcd&lt;/code&gt; 或 &lt;code&gt;NetworkManager&lt;/code&gt; 都關掉的話，&lt;br /&gt;
在 &lt;code&gt;dmesg&lt;/code&gt; 會看到以下相關的錯誤訊息：  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[ 6677.574915] ERROR @wl_notify_scan_status :  
[ 6677.574919] wlp3s0 Scan_results error (-22)  
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[ 6560.346608] ERROR @wl_cfg80211_scan :  
[ 6560.346611] WLC_SCAN error (-22)  
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[ 6467.860408] ERROR @wl_notify_scan_status :  
[ 6467.860413] wlp3s0 Scan_results error (-22)  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;詳細請參考為這個問題而寫的新文章&lt;br /&gt;
&lt;a href="/posts/2017/10/31/make-bcm4360-14e4-43a0-rev-03-work-on-arch-linux-with-broadcom-wl-dkms/"&gt;用 broadcom-wl-dkms 讓 BCM4360 [14e4:43a0] (rev 03) 能順利在 Arch Linux 中使用&lt;/a&gt;  &lt;/p&gt;
&lt;hr /&gt;
&lt;h4&gt;Improve DHCP connect init speed&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Add below into &lt;code&gt;/etc/dhcpcd.conf&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# Disable IP ARP checking  
noarp  
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Network Proxy Settings&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Proxy_settings"&gt;https://wiki.archlinux.org/index.php/Proxy_settings&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;wicd&lt;/code&gt; has no proxy setting function, I can only set proxy configuration in &lt;code&gt;Firefox&lt;/code&gt;.(This only works for web browsing)  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;networkmanager&lt;/code&gt; can have proxy settings via install plugin &lt;code&gt;proxydriver&lt;/code&gt;, check &lt;a href="https://wiki.archlinux.org/index.php/NetworkManager"&gt;NetworkManager - ArchWiki&lt;/a&gt; for how to setup.  &lt;/li&gt;
&lt;li&gt;I am kinda &lt;code&gt;wicd&lt;/code&gt; lover and don't use proxy really often, so I think I'm just ok with it currently.  &lt;/li&gt;
&lt;li&gt;(Considering write the proxy setting functionality for &lt;code&gt;wicd&lt;/code&gt;...)  &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;File Manager&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S pcmanfm&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Keyboard&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S xorg-xmodmap&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;for changing keymap like swap Ctrl and Caps Lock  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Check /etc/mkinitcpio.conf if &lt;code&gt;HOOKS&lt;/code&gt; have &lt;code&gt;keyboard&lt;/code&gt;, if not, add it then &lt;code&gt;sudo mkinitcpio -p linux&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;fix &lt;code&gt;~&lt;/code&gt; problem  &lt;ul&gt;
&lt;li&gt;if you press &lt;code&gt;~&lt;/code&gt; on the keyboard, it will not print out &lt;code&gt;~&lt;/code&gt; correctly.  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;/etc/modprobe.d/hid_apple.conf  
---  
options hid_apple iso_layout=0  
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Backlight&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/MacBook#Keyboard_Backlight"&gt;https://wiki.archlinux.org/index.php/MacBook#Keyboard_Backlight&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;yaourt -S kbdlight&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S xorg-xev&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;For chekcing the key value of keyboard  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Synaptic (Touchpad)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S xf86-input-synaptics&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;only basic functions&lt;br /&gt;
or  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;yaourt -S xf86-input-mtrack-git&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/BlueDragonX/xf86-input-mtrack"&gt;https://github.com/BlueDragonX/xf86-input-mtrack&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;for OS X like touchpad and flexible configuration  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;/etc/X11/xorg.conf.d/10-mtrack.conf  
---  
Section &amp;quot;InputClass&amp;quot;  
    MatchIsTouchpad &amp;quot;on&amp;quot;  
    Identifier      &amp;quot;Touchpads&amp;quot;  
    Driver          &amp;quot;mtrack&amp;quot;  

    Option &amp;quot;Thumbsize&amp;quot;      &amp;quot;50&amp;quot;  
    Option &amp;quot;ScrollDistance&amp;quot; &amp;quot;150&amp;quot;  
    Option &amp;quot;Sensitivity&amp;quot;    &amp;quot;0.9&amp;quot;  
    Option &amp;quot;MaxTapTime&amp;quot;     &amp;quot;120&amp;quot;  
    Option &amp;quot;IgnoreThumb&amp;quot;    &amp;quot;true&amp;quot;  
    Option &amp;quot;IgnorePalm&amp;quot;     &amp;quot;true&amp;quot;  
    Option &amp;quot;TapDragEnable&amp;quot;  &amp;quot;false&amp;quot;  

    # Natural Scrolling  
    Option &amp;quot;ScrollUpButton&amp;quot;     &amp;quot;5&amp;quot;  
    Option &amp;quot;ScrollDownButton&amp;quot;   &amp;quot;4&amp;quot;  
    Option &amp;quot;ScrollLeftButton&amp;quot;   &amp;quot;7&amp;quot;  
    Option &amp;quot;ScrollRightButton&amp;quot;  &amp;quot;6&amp;quot;  

    # Disable tap-to-click  
    # Option &amp;quot;TapButton1&amp;quot; &amp;quot;0&amp;quot;  
    # Option &amp;quot;TapButton2&amp;quot; &amp;quot;0&amp;quot;  
    # Option &amp;quot;TapButton3&amp;quot; &amp;quot;0&amp;quot;  
EndSection  
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Bluetooth (Headset)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;links  &lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Bluetooth"&gt;https://wiki.archlinux.org/index.php/Bluetooth&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Blueman"&gt;https://wiki.archlinux.org/index.php/Blueman&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Bluetooth_headset"&gt;https://wiki.archlinux.org/index.php/Bluetooth_headset&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S bluez bluez-utils bluez-libs bluez-firmware blueman pulseaudio-bluetooth pulseaudio-alsa pavucontrol&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;sudo modprobe btusb&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;sudo systemctl enable bluetooth&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;sudo systemctl start bluetooth&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;blueman-manager&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;scan, pair, connect  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pavucontrol&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;Change sound channel to bluetooth headset  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Sometimes the bluetooth device may be blocked  &lt;ul&gt;
&lt;li&gt;use &lt;code&gt;rfkill list&lt;/code&gt; to check if it is blocked.  &lt;/li&gt;
&lt;li&gt;use &lt;code&gt;sudo rfkill unblock bluetooth&lt;/code&gt; to unblock.  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Sound&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S xf86-video-intel alsa-utils&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;alsa-utils include alsamixer, amixer  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Add the content below to &lt;code&gt;/etc/asound.conf&lt;/code&gt; //Important  &lt;ul&gt;
&lt;li&gt;&lt;code&gt;/etc/asound.conf&lt;/code&gt; should be created after installed &lt;code&gt;pulseaudio-alsa&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;/etc/asound.conf  
---  
defaults.pcm.card 1  
defaults.pcm.device 0  
defaults.ctl.card 1  
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;awesomewm&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S awesome vicious&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;cp -r /usr/share/awesome/themes ~/.config/awesome/&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Power Management&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Power_management"&gt;https://wiki.archlinux.org/index.php/Power_management&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/MacBookPro11,x#Powersave"&gt;https://wiki.archlinux.org/index.php/MacBookPro11,x#Powersave&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;ACPI&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S acpi&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Powertop&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S powertop&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;Create &lt;code&gt;/etc/systemd/system/powertop.service&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[Unit]  
Description=Powertop Service  
[Service]  
Type=oneshot  
ExecStart=/usr/bin/powertop --auto-tune  
[Install]  
WantedBy=multi-user.target  
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo systemctl enable powertop.service&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;sudo systemctl start powertop.service&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;cpupower&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/torvalds/linux/tree/master/tools/power/cpupower"&gt;https://github.com/torvalds/linux/tree/master/tools/power/cpupower&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo pacman -S cpupower  
sudo systemctl enable cpupower  
sudo systemctl start cpupower  
sudo cpupower frequency-set -g powersave  
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;thermald&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/01org/thermal_daemon"&gt;01org/thermal_daemon · GitHub&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;Thermal daemon for Intel Architecture  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;yaourt -S thermald  
sudo systemctl enable thermald  
sudo systemctl start thermald  
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Fix the kworker CPU hug&lt;/h4&gt;
&lt;p&gt;"kworker" triggers some ACPI interrupts.&lt;br /&gt;
You can use &lt;code&gt;grep . -r /sys/firmware/acpi/interrupts/&lt;/code&gt; to check.&lt;br /&gt;
For me, &lt;code&gt;gpe4E&lt;/code&gt; triggered lots of ACPI interruptions.&lt;br /&gt;
So disable it via systemd.  &lt;/p&gt;
&lt;p&gt;Create &lt;code&gt;/etc/systemd/system/suppress-gpe4E.service&lt;/code&gt;&lt;br /&gt;
and add the following lines.  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[Unit]  
Description=Disables GPE 4E, an interrupt that is going crazy on Macs  
[Service]  
ExecStart=/usr/bin/bash -c &amp;#39;echo &amp;quot;disable&amp;quot; &amp;gt; /sys/firmware/acpi/interrupts/gpe4E&amp;#39;  
[Install]  
WantedBy=multi-user.target  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;then enable and start it:&lt;br /&gt;
&lt;code&gt;sudo systemctl enable suppress-gpe4E.service&lt;/code&gt;&lt;br /&gt;
&lt;code&gt;sudo systemctl start suppress-gpe4E.service&lt;/code&gt;  &lt;/p&gt;
&lt;h4&gt;Enable power save mode on Intel Audio card&lt;/h4&gt;
&lt;p&gt;Create new hook:&lt;br /&gt;
&lt;code&gt;sudoedit /etc/modprobe.d/60-snd-hda-intel.conf&lt;/code&gt;&lt;br /&gt;
and add:  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# Enable Power Saving on Intel HDA Audio  
options snd_hda_intel power_save=1  
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Enable powersaving options for Intel Processor&lt;/h4&gt;
&lt;p&gt;Create new hook:&lt;br /&gt;
&lt;code&gt;sudoedit /etc/modprobe.d/60-i915.conf&lt;/code&gt;&lt;br /&gt;
and add:  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# Experimental options to improve power saving on Intel Graphics  
options i915 enable_rc6=1 enable_fbc=1 lvds_downclock=1  
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Suspend problem&lt;/h3&gt;
&lt;h4&gt;Prevent shutdown directly when power button is pressed&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/MacBookPro11,x#Repurpose_the_power_key"&gt;https://wiki.archlinux.org/index.php/MacBookPro11,x#Repurpose_the_power_key&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;/etc/systemd/logind.conf&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;&lt;code&gt;HandlePowerKey=suspend&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Disable &lt;a href="https://en.wikipedia.org/wiki/Swappiness"&gt;Swappiness&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;To save SSD and avoid kswapd using lots of CPU resource on finding available swap when there's no more virtual memory can be used.  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/igorpecovnik/lib/issues/219"&gt;kswapd 100% CPU-usage · Issue #219 · igorpecovnik/lib · GitHub&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/Documentation/sysctl/vm.txt"&gt;https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/Documentation/sysctl/vm.txt&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;sudo sysctl vm.swappiness=0&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;&lt;code&gt;The kernel will swap only to avoid an out of memory condition, when free memory will be below vm.min_free_kbytes limit. See the "VM Sysctl documentation"&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;sudo sysctl vm.min_free_kbytes=0&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;sudoedit /etc/sysctl.d/99-sysctl.conf&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;Add &lt;code&gt;vm.swappiness=0&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;Add &lt;code&gt;vm.min_free_kbytes=0&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Fixing suspend mode&lt;/h4&gt;
&lt;p&gt;Use &lt;code&gt;cat /proc/acpi/wakeup&lt;/code&gt;.&lt;br /&gt;
There's a line saying &lt;code&gt;XHC1  S3  *enabled  pci:0000:00:14.0&lt;/code&gt;.&lt;br /&gt;
We only want the &lt;code&gt;LID0  S4  *enabled   platform:PNP0C0D:00&lt;/code&gt; to be enbaled.&lt;br /&gt;
So &lt;code&gt;sudoedit /etc/udev/rules.d/90-xhc_sleep.rules&lt;/code&gt; and add the follwing lines.  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# Disable wake from S3 on XHC1  
SUBSYSTEM==&amp;quot;pci&amp;quot;, KERNEL==&amp;quot;0000:00:14.0&amp;quot;, ATTR{device}==&amp;quot;0x9c31&amp;quot; RUN+=&amp;quot;/bin/sh -c &amp;#39;/bin/echo disabled &amp;gt; /sys$env{DEVPATH}/power/wakeup&amp;#39;&amp;quot;  
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Powersave&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Unia/powersave"&gt;GitHub - Unia/powersave: Linux power save settings, compatible with systemd&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;/etc/sysctl.d/99-powersave.conf  
---  
# Disable NMI watchdog  
kernel.nmi_watchdog = 0  

# laptop_mode is a knob that controls &amp;quot;laptop mode&amp;quot;. All the things that are controlled by this  
# knob are discussed in https://www.kernel.org/doc/Documentation/laptops/laptop-mode.txt (Default  
# is 0).  
vm.laptop_mode = 5  

# Contains, as a percentage of total available memory that contains free pages and reclaimable  
# pages, the number of pages at which a process which is generating disk writes will itself start  
# writing out dirty data (Default is 20).  
#vm.dirty_ratio = 20  

# Contains, as a percentage of total available memory that contains free pages and reclaimable  
# pages, the number of pages at which the background kernel flusher threads will start writing out  
# dirty data (Default is 10).  
#vm.dirty_background_ratio = 10  

# This tunable is used to define when dirty data is old enough to be eligible for writeout by the  
# kernel flusher threads.  It is expressed in 100&amp;#39;ths of a second.  Data which has been dirty  
# in-memory for longer than this interval will be written out next time a flusher thread wakes up  
# (Default is 3000).  
#vm.dirty_expire_centisecs = 3000  

# The kernel flusher threads will periodically wake up and write `old&amp;#39; data out to disk.  This  
# tunable expresses the interval between those wakeups, in 100&amp;#39;ths of a second (Default is 500).  
vm.dirty_writeback_centisecs = 1500  
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;/etc/udev/rules.d/50-powersave-brightness.rules  
---  
# Display Power Management Signaling  
SUBSYSTEM==&amp;quot;power_supply&amp;quot;, ENV{POWER_SUPPLY_ONLINE}==&amp;quot;0&amp;quot;, ENV{DISPLAY}=&amp;quot;DPY&amp;quot;, ENV{XAUTHORITY}=&amp;quot;/home/USER/.Xauthority&amp;quot;, RUN+=&amp;quot;/usr/bin/xset dpms 120 240 360&amp;quot;  
SUBSYSTEM==&amp;quot;power_supply&amp;quot;, ENV{POWER_SUPPLY_ONLINE}==&amp;quot;1&amp;quot;, ENV{DISPLAY}=&amp;quot;DPY&amp;quot;, ENV{XAUTHORITY}=&amp;quot;/home/USER/.Xauthority&amp;quot;, RUN+=&amp;quot;/usr/bin/xset dpms 300 450 600&amp;quot;  
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;/etc/udev/rules.d/50-powersave-suspend.rules  
---  
# Suspend when battery is at 2%  
SUBSYSTEM==&amp;quot;power_supply&amp;quot;, ATTR{status}==&amp;quot;Discharging&amp;quot;, ATTR{capacity}==&amp;quot;2&amp;quot;, RUN+=&amp;quot;/usr/bin/systemctl suspend&amp;quot;  
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Monitor&lt;/h3&gt;
&lt;h4&gt;Dual Display&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Multihead"&gt;https://wiki.archlinux.org/index.php/Multihead&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S xorg-xrandr&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Xrandr"&gt;https://wiki.archlinux.org/index.php/Xrandr&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;xrandr should work.  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;For more friendly GUI setting, &lt;code&gt;sudo pacman -S lxrandr&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;h5&gt;But my 1920x1080 external display only get 1024x768 support&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Xrandr#Adding_undetected_resolutions"&gt;https://wiki.archlinux.org/index.php/Xrandr#Adding_undetected_resolutions&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cvt &lt;span class="m"&gt;1920&lt;/span&gt; &lt;span class="m"&gt;1080&lt;/span&gt;  
&lt;span class="c1"&gt;# 1920x1080 59.96 Hz (CVT 2.07M9) hsync: 67.16 kHz; pclk: 173.00 MHz  &lt;/span&gt;
Modeline &lt;span class="s2"&gt;&amp;quot;1920x1080_60.00&amp;quot;&lt;/span&gt;  &lt;span class="m"&gt;173&lt;/span&gt;.00  &lt;span class="m"&gt;1920&lt;/span&gt; &lt;span class="m"&gt;2048&lt;/span&gt; &lt;span class="m"&gt;2248&lt;/span&gt; &lt;span class="m"&gt;2576&lt;/span&gt;  &lt;span class="m"&gt;1080&lt;/span&gt; &lt;span class="m"&gt;1083&lt;/span&gt; &lt;span class="m"&gt;1088&lt;/span&gt; &lt;span class="m"&gt;1120&lt;/span&gt; -hsync +vsync  

$ xrandr --newmode &lt;span class="s2"&gt;&amp;quot;1920x1080_60.00&amp;quot;&lt;/span&gt;  &lt;span class="m"&gt;173&lt;/span&gt;.00  &lt;span class="m"&gt;1920&lt;/span&gt; &lt;span class="m"&gt;2048&lt;/span&gt; &lt;span class="m"&gt;2248&lt;/span&gt; &lt;span class="m"&gt;2576&lt;/span&gt;  &lt;span class="m"&gt;1080&lt;/span&gt; &lt;span class="m"&gt;1083&lt;/span&gt; &lt;span class="m"&gt;1088&lt;/span&gt; &lt;span class="m"&gt;1120&lt;/span&gt; -hsync +vsync  

$ xrandr --addmode DP1 1920x1080_60.00  

$ xrandr --output eDP1 --auto --output DP1 --mode 1920x1080_60.00 --left-of eDP1  
&lt;/pre&gt;&lt;/div&gt;


&lt;h5&gt;Hotplug problem - xrandr won't detect hotplug mini-display port to VGA adapter&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;I'm pretty sure that &lt;code&gt;udev&lt;/code&gt; indeed detect the hotplug event, but &lt;code&gt;xrandr&lt;/code&gt; always shows that &lt;code&gt;DP1&lt;/code&gt;(external VGA monitor) is disconnected.  &lt;/li&gt;
&lt;li&gt;This can be solved by adding mode for &lt;code&gt;DP1&lt;/code&gt; (check commands above).  &lt;/li&gt;
&lt;li&gt;After adding modes, just type &lt;code&gt;xrandr --output eDP1 --auto --output DP1 --mode ${mode_name} --left-of eDP1&lt;/code&gt; again, even if &lt;code&gt;xrandr&lt;/code&gt; still shows that &lt;code&gt;DP1&lt;/code&gt; is disconnected, it works.  &lt;/li&gt;
&lt;li&gt;So, add all modes we need (1920x1080, 1280x720, 1024x768, ...) can be a workaroud for this problem.  &lt;/li&gt;
&lt;li&gt;I think the problem is on &lt;code&gt;xrandr&lt;/code&gt; cannot recongnize whether thunderbolt to VGA adapter is connected or not when hotplug.  &lt;/li&gt;
&lt;li&gt;Add below to &lt;code&gt;.xinitrc&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;xrandr --newmode &amp;quot;1920x1080_60.00&amp;quot;  173.00  1920 2048 2248 2576  1080 1083 1088 1120 -hsync +vsync  
xrandr --addmode DP1 1920x1080_60.00  

xrandr --newmode &amp;quot;1280x720_60.00&amp;quot;   74.50  1280 1344 1472 1664  720 723 728 748 -hsync +vsync  
xrandr --addmode DP1 1280x720_60.00  

xrandr --newmode &amp;quot;1024x768_60.00&amp;quot;   63.50  1024 1072 1176 1328  768 771 775 798 -hsync +vsync  
xrandr --addmode DP1 1024x768_60.00  

xrandr --output eDP1 --auto --output DP1 --mode 1920x1080_60.00 --left-of eDP1  
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Birghtness&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S xorg-xbacklight&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;yaourt -S mba6x_bl-dkms&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;(2016/12/02 update)  &lt;ul&gt;
&lt;li&gt;&lt;code&gt;mba6x_bl-dkms&lt;/code&gt; now depends on &lt;code&gt;mba6x_bl_dkms-git&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;mba6x_bl-dkms-git-48.055d50d-1&lt;/code&gt; doesn't work with &lt;code&gt;linux-4.8.11-1&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;Need to use &lt;code&gt;sudo rmmod mba6x_bl&lt;/code&gt; to make &lt;code&gt;xbacklight&lt;/code&gt; work.  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;(optional) &lt;code&gt;yaourt -S lightum-git&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;For auto adjust keyboard and monitor birghtness by light sensor  &lt;/li&gt;
&lt;li&gt;The AUR version has bug, use this fork version &lt;a href="https://github.com/esoleyman/lightum"&gt;https://github.com/esoleyman/lightum&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;USB&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;yaourt -S pmount&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Fan&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/MikaelStrom/macfanctld"&gt;https://github.com/MikaelStrom/macfanctld&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ yaourt -S macfanctld  
$ sudo systemctl &lt;span class="nb"&gt;enable&lt;/span&gt; macfanctld  
$ sudo systemctl start macfanctld  
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;IME&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S gcin&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S libchewing&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;for chewing input method  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S anthy&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;for Japanese input method  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;sudo gtk-query-immodules-2.0 --update-cache&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Browser&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S firefox firefox-i18n-zh-tw&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;Flash  &lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S flashplugin&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://addons.mozilla.org/en-US/firefox/addon/flashblock/"&gt;https://addons.mozilla.org/en-US/firefox/addon/flashblock/&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Fonts&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S wqy-zenhei adobe-source-han-sans-tw-fonts&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Mobile&lt;/h3&gt;
&lt;h4&gt;USB-Tethering (Works out of box)&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Android_tethering#USB_tethering"&gt;https://wiki.archlinux.org/index.php/Android_tethering#USB_tethering&lt;/a&gt;  &lt;ul&gt;
&lt;li&gt;Disconnect from other networks  &lt;/li&gt;
&lt;li&gt;Connect phone to computer via USB cable  &lt;/li&gt;
&lt;li&gt;Enable the tethering option from the phone  &lt;/li&gt;
&lt;li&gt;Use &lt;code&gt;ip link&lt;/code&gt; and search &lt;code&gt;usb?&lt;/code&gt; or &lt;code&gt;enp?s??u?&lt;/code&gt; interface  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;sudo dhcpcd ${interface}&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;Use &lt;code&gt;ip link&lt;/code&gt; again to check if already got an ip on that interface  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Mount Android phone&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/MTP"&gt;https://wiki.archlinux.org/index.php/MTP&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;install &lt;code&gt;libmtp&lt;/code&gt;, &lt;code&gt;android-file-transfer&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo pacman -S libmtp  
$ yaourt -S android-file-transfer  

&lt;span class="o"&gt;(&lt;/span&gt;connect Android phone to Arch Linux via USB&lt;span class="o"&gt;)&lt;/span&gt;  

$ aft-mtp-mount ~/mnt   // mount android to ~/mnt  
$ fusermount -u ~/mnt   // unmount  
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Webcam&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;[UPDATED] see the info below  &lt;/p&gt;
&lt;p&gt;The Facetime HD webcam (included on 2013 MBAs onwards) is no longer UVC device, and therefore, does not work out of the box.&lt;br /&gt;
It is actually a PCIE device.&lt;br /&gt;
While &lt;a href="https://github.com/patjak/bcwc_pcie"&gt;a bcwc_pcie driver is being developed&lt;/a&gt;, it will probably take some time before it is ready.&lt;br /&gt;
See also &lt;a href="https://bugzilla.kernel.org/show_bug.cgi?id=71131"&gt;Linux bug #71131&lt;/a&gt; and &lt;a href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/1276811"&gt;Ubuntu bug #1276711&lt;/a&gt;.  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/MacBook#Webcam"&gt;https://wiki.archlinux.org/index.php/MacBook#Webcam&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;(2017/12/08 update)  &lt;ul&gt;
&lt;li&gt;&lt;a href="https://aur.archlinux.org/packages/bcwc-pcie-git/"&gt;bcwc-pcie-git&lt;/a&gt; on AUR works.  &lt;ul&gt;
&lt;li&gt;Use &lt;code&gt;yaourt -S bcwc-pcie-git&lt;/code&gt; or download the tarball and use &lt;code&gt;makepkg -s&lt;/code&gt; to install it.  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Disable MacBook Firmware Boot Sound&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://wiki.archlinux.org/index.php/MacBook#Arch_Linux_only"&gt;https://wiki.archlinux.org/index.php/MacBook#Arch_Linux_only&lt;/a&gt;  &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The only special consideration is the MacBook firmware boot sound.&lt;br /&gt;
To ensure that this sound is off: mute the volume in OS X before continuing further.  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I forgot to mute the volume before deleting the OS X.&lt;br /&gt;
So, I have to get an OS X installed on USB drive.&lt;br /&gt;
In order to mute the firmware boot sound and for the firmware updating in the furture.  &lt;/p&gt;
&lt;h3&gt;Hotkey Settings&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;use &lt;code&gt;xev&lt;/code&gt; to check the keymap  &lt;/li&gt;
&lt;li&gt;modify &lt;code&gt;rc.lua&lt;/code&gt; instead using &lt;code&gt;sxhkd&lt;/code&gt; if you are using awesomewm.  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/PulseAudio#Keyboard_volume_control"&gt;https://wiki.archlinux.org/index.php/PulseAudio#Keyboard_volume_control&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;Add below to the globalkeys in &lt;code&gt;rc.lua&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;-- MacBook Air function keys  
awful.key({ }, &amp;quot;XF86MonBrightnessDown&amp;quot;,  
    function ()  
        awful.util.spawn(&amp;quot;xbacklight -dec 10&amp;quot;)  
    end  
),  
awful.key({ }, &amp;quot;XF86MonBrightnessUp&amp;quot;,  
    function ()  
        awful.util.spawn(&amp;quot;xbacklight -inc 10&amp;quot;)  
    end  
),  
awful.key({ }, &amp;quot;XF86LaunchA&amp;quot;,  
    function ()  
        awful.util.spawn(&amp;quot;xrandr --output eDP1 --auto --output DP1 --mode 1920x1080_60.00 --left-of eDP1&amp;quot;)  
    end  
),  
awful.key({ }, &amp;quot;XF86LaunchB&amp;quot;,  
    function ()  
        awful.util.spawn(&amp;quot;xrandr --output eDP1 --auto --output DP1 --mode 1920x1080_60.00 --same-as eDP1&amp;quot;)  
    end  
),  
awful.key({ }, &amp;quot;XF86KbdBrightnessDown&amp;quot;,  
    function ()  
        awful.util.spawn(&amp;quot;kbdlight down 10&amp;quot;)  
    end  
),  
awful.key({ }, &amp;quot;XF86KbdBrightnessUp&amp;quot;,  
    function ()  
        awful.util.spawn(&amp;quot;kbdlight up 10&amp;quot;)  
    end  
),  
awful.key({ }, &amp;quot;XF86AudioMute&amp;quot;,  
    function ()  
        awful.util.spawn(&amp;quot;pactl set-sink-mute 0 toggle&amp;quot;)  
    end  
),  
awful.key({ }, &amp;quot;XF86AudioLowerVolume&amp;quot;,  
    function ()  
        awful.util.spawn(&amp;quot;pactl set-sink-mute 0 false&amp;quot;)  
        awful.util.spawn(&amp;quot;pactl set-sink-volume 0 -5%&amp;quot;)  
    end  
),  
awful.key({ }, &amp;quot;XF86AudioRaiseVolume&amp;quot;,  
    function ()  
        awful.util.spawn(&amp;quot;pactl set-sink-mute 0 false&amp;quot;)  
        awful.util.spawn(&amp;quot;pactl set-sink-volume 0 +5%&amp;quot;)  
    end  
)  
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Kernel Upgrade&lt;/h3&gt;
&lt;p&gt;After the kernel upgrade,&lt;br /&gt;
there are no &lt;code&gt;wl&lt;/code&gt; and &lt;code&gt;mba6x_bl&lt;/code&gt; modules for the new kernel,&lt;br /&gt;
(Becasue these two modules are in AUR and not supported by the Official.)&lt;br /&gt;
so, we need to rebuild &lt;code&gt;broadcom-wl-dkms&lt;/code&gt; and &lt;code&gt;mba6x_bl-dkms&lt;/code&gt; again.&lt;br /&gt;
Otherwise, the wireless interface won't be detected and backlight cannot be tuned while using the new kernel.&lt;br /&gt;
Be sure to download the lastest version of these two packages before reboot to the new kernel.&lt;br /&gt;
Follow the instructions below should work.  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo pacman -S linux-headers linux  

&lt;span class="o"&gt;(&lt;/span&gt;after kernel upgarde, download lastest version of these two packages&lt;span class="o"&gt;)&lt;/span&gt;  
$ yaourt -S broadcom-wl-dkms mba6x_bl-dkms  
$ reboot  

&lt;span class="o"&gt;(&lt;/span&gt;after reboot, rebuild these two kernel modules &lt;span class="k"&gt;for&lt;/span&gt; the new kernel and load them&lt;span class="o"&gt;)&lt;/span&gt;  
$ &lt;span class="nb"&gt;cd&lt;/span&gt; /var/cache/yaourt  
$ sudo pacman -U &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;broadcom&lt;/span&gt;&lt;span class="p"&gt;-wl-dkms_package&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;mba6x_bl&lt;/span&gt;&lt;span class="p"&gt;-dkms_package&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;  
$ sudo modprobe wl mba6x_bl  

$ reboot  //optional  
&lt;span class="o"&gt;(&lt;/span&gt;reboot again, and make sure that everything goes right.&lt;span class="o"&gt;)&lt;/span&gt;  
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;Upgrade all packages  &lt;ul&gt;
&lt;li&gt;&lt;code&gt;yaourt -Syua&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Upgrade all packages (with refetching and recompling all git packages  &lt;ul&gt;
&lt;li&gt;&lt;code&gt;yaourt -Syua --devel&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;h2&gt;Misc&lt;/h2&gt;
&lt;p&gt;Below are my personal needed. It's optional.&lt;br /&gt;
&lt;a href="https://wiki.archlinux.org/index.php/List_of_applications"&gt;https://wiki.archlinux.org/index.php/List_of_applications&lt;/a&gt;  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S virtualbox virtualbox-host-modules&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S unrar&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Network&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S mosh mtr wget nmap&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S dns-tools&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;for &lt;code&gt;dig&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Google Drive&lt;/h3&gt;
&lt;p&gt;There are lots of 3rd party GNU/Linux clients for Google Drive:  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/google/skicka"&gt;https://github.com/google/skicka&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/odeke-em/drive"&gt;https://github.com/odeke-em/drive&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/vitalif/grive2"&gt;https://github.com/vitalif/grive2&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/astrada/google-drive-ocamlfuse"&gt;https://github.com/astrada/google-drive-ocamlfuse&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;&lt;a href="https://github.com/google/skicka"&gt;skicka&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;Here, I chose &lt;code&gt;skicka&lt;/code&gt; because some of my friends had already tried it&lt;br /&gt;
and they felt good about it, espcially for the &lt;code&gt;encrypt&lt;/code&gt; funciton.  &lt;/p&gt;
&lt;p&gt;To install &lt;code&gt;skicka&lt;/code&gt; you need to install &lt;code&gt;go&lt;/code&gt; and &lt;code&gt;mercurial&lt;/code&gt; first.&lt;br /&gt;
Then, install &lt;code&gt;skicka&lt;/code&gt;, follow instructions below should work.  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo pacman -S go mercurial  
$ mkdir ~/go  
$ &lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;GOPATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;~/go  
$ &lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$PATH&lt;/span&gt;:~/go/bin  
$ go get github.com/google/skicka  
$ skicka init  
$ skicka -no-browser-auth ls    // &lt;span class="nb"&gt;set&lt;/span&gt; authentication &lt;span class="k"&gt;for&lt;/span&gt; skicka  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;You can check out &lt;a href="https://github.com/google/skicka/blob/master/README.md"&gt;https://github.com/google/skicka/blob/master/README.md&lt;/a&gt; for further info.  &lt;/p&gt;
&lt;p&gt;But, after I installed &lt;code&gt;skicka&lt;/code&gt;, it didn't find all my directories on Google Drive.&lt;br /&gt;
So, I just changed to &lt;code&gt;drive&lt;/code&gt;  &lt;/p&gt;
&lt;h4&gt;&lt;a href="https://github.com/odeke-em/drive"&gt;drive&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;use &lt;code&gt;yaourt -S drive&lt;/code&gt; to install it.&lt;br /&gt;
then &lt;code&gt;drive init ${dir_for_google_drive}&lt;/code&gt;&lt;br /&gt;
copy and paste the token, then it should work.&lt;br /&gt;
Check &lt;a href="https://github.com/odeke-em/drive/blob/master/README.md"&gt;https://github.com/odeke-em/drive/blob/master/README.md&lt;/a&gt; for more info.&lt;br /&gt;
(This command usage is a bit like &lt;code&gt;git&lt;/code&gt;)  &lt;/p&gt;
&lt;h3&gt;Python&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S python2 python-pip&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;sudo pip install virtualenvwrapper&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Pelican&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;pip2 install pelican markdown ghp-import&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;GitHub&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Add SSH Key  &lt;ul&gt;
&lt;li&gt;&lt;a href="https://help.github.com/articles/generating-ssh-keys/#platform-linux"&gt;https://help.github.com/articles/generating-ssh-keys/#platform-linux&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Screenshot&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S shutter&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Terminal&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S rxvt-unicode guake&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Monitoring&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S htop glances lm_sensors&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo sensors-detect&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Multi-Media&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S eog&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S vlc&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;yaourt -S wine-git&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;need to uncomment &lt;code&gt;multilib&lt;/code&gt; in &lt;code&gt;/etc/pacman.conf&lt;/code&gt; first  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S playonlinux&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Office&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S evince&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;for .pdf files  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;sudo pacman -S libreoffice&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;App&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;TweetDeck  &lt;ul&gt;
&lt;li&gt;&lt;code&gt;yaourt -S nwjs-bin&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/passcod/twd"&gt;https://github.com/passcod/twd&lt;/a&gt;  &lt;ul&gt;
&lt;li&gt;&lt;code&gt;git clone https://github.com/passcod/twd.git&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;cd twd&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;nw .&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;Still buggy and need package on AUR  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Slack  &lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/raelgc/scudcloud"&gt;https://github.com/raelgc/scudcloud&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;yaourt -S scudcloud&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Gitter  &lt;ul&gt;
&lt;li&gt;&lt;code&gt;yaourt -S gitter&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Facebook Messenger  &lt;ul&gt;
&lt;li&gt;&lt;code&gt;yaourt -S messengerfordesktop&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Popcorn-Time  &lt;ul&gt;
&lt;li&gt;&lt;code&gt;yaourt -S popcorntime&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;h1&gt;References&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/MacBook"&gt;MacBook - ArchWiki&lt;/a&gt;  &lt;ul&gt;
&lt;li&gt;Arch Linux Only, Dual Boot, Arch Linux + OS X + Windows  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/pandeiro/arch-on-air"&gt;pandeiro/arch-on-air · GitHub&lt;/a&gt;  &lt;ul&gt;
&lt;li&gt;Dual Boot  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="http://mandriva-usher.blogspot.tw/2014/02/gcin-firefox-stardic.html"&gt;Mandriva: gcin 無法使用於 firefox, stardic&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/General_recommendations"&gt;General recommendations - ArchWiki&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Beginners'_guide"&gt;Beginners' guide - ArchWiki&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/BlueDragonX/xf86-input-mtrack/blob/master/README.md"&gt;xf86-input-mtrack/README.md at master · BlueDragonX/xf86-input-mtrack · GitHub&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/MacBook#Mid_2013_13.22_-_Version_6.2C2"&gt;MacBook - ArchWiki&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/List_of_applications"&gt;List of applications - ArchWiki&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://help.ubuntu.com/community/MacBookAir6-2/Trusty"&gt;MacBookAir6-2/Trusty - Community Help Wiki&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Apple_Keyboard"&gt;Apple Keyboard - ArchWiki&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Sxhkd"&gt;Sxhkd - ArchWiki&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Bluetooth"&gt;Bluetooth - ArchWiki&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Bluetooth_headset"&gt;Bluetooth headset - ArchWiki&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="http://xatierlike.blogspot.tw/2015/05/skicka-google-drive-command-line-tool.html"&gt;(=..=)/: skicka: Google drive command line tool&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/MTP"&gt;MTP - ArchWiki&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/PulseAudio#Keyboard_volume_control"&gt;PulseAudio - ArchWiki&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://medium.com/@PhilPlckthun/arch-linux-running-on-my-macbook-2ea525ebefe3"&gt;Arch Linux running on my MacBook — Medium&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Power_management"&gt;Power management - ArchWiki&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/MacBookPro11,x#Powersave"&gt;MacBookPro11,x - ArchWiki&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Unia/powersave"&gt;GitHub - Unia/powersave: Linux power save settings, compatible with systemd&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">m157q</dc:creator><pubDate>Fri, 08 Dec 2017 12:47:00 +0800</pubDate><guid isPermaLink="false">tag:blog.m157q.tw,2015-09-10:posts/2015/09/10/install-arch-linux-on-macbook-air-mid-2013/</guid><category>Arch Linux</category><category>MacBook Air</category><category>Linux</category><category>COSCUP</category></item><item><title>pacman mirrorlist - Taiwan vs. Taiwan (Province of China)</title><link>https://blog.m157q.tw/posts/2014/10/29/pacman-mirrorlist-taiwan-vs-taiwan-province-of-china/</link><description>&lt;p&gt;這是個有點久以前的故事了  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://projects.archlinux.org/svntogit/packages.git/commit/trunk?h=packages/pacman-mirrorlist&amp;amp;id=4ebeb6161b4f178b9f3105d47a2c408bc1dd9547"&gt;2012/06/26 的 pacman mirrorlist commit&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;把 Taiwan 改成了 Taiwan (Province of China)  &lt;/p&gt;
&lt;p&gt;然後就有台灣人在 Arch Bugs Report 發起一則 Bug Report  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://bugs.archlinux.org/task/30444"&gt;FS#30444 - Download Page uses Taiwan's name as “Taiwan, Province of China”&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;要求把名字改回 Taiwan  &lt;/p&gt;
&lt;p&gt;陸陸續續也有人去發 Bug Report 要求正名  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://bugs.archlinux.org/task/35586"&gt;FS#35586 - Please change "Taiwan, province of china" to "Taiwan in pacman-mirrorlist&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://bugs.archlinux.org/task/35757"&gt;FS#35757 - Listing for Taiwan&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://bugs.archlinux.org/task/37973"&gt;FS#37973 - Taiwan is not a province of China...&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;然後之後就被 Admin 拿 &lt;a href="http://en.wikipedia.org/wiki/ISO_3166"&gt;ISO 3166&lt;/a&gt; 打槍  &lt;/p&gt;
&lt;p&gt;&lt;img alt="ISO 3166" src="/files/pacman-mirrorlist-taiwan-vs-taiwan-province-of-china/iso_3166.png" /&gt;  &lt;/p&gt;
&lt;p&gt;把相關所有 Report 都 close 掉  &lt;/p&gt;
&lt;p&gt;直到剛剛&lt;br /&gt;
下個 &lt;code&gt;sudo pacman -Syu&lt;/code&gt; 更新 Arch，再用 &lt;code&gt;sudo pacdiff&lt;/code&gt; 更新設定檔的時候&lt;br /&gt;
發現從 Taiwan (Province of China) 改回 Taiwan 了  &lt;/p&gt;
&lt;p&gt;&lt;img alt="Change Back to Taiwan" src="/files/pacman-mirrorlist-taiwan-vs-taiwan-province-of-china/change_back_to_taiwan.png" /&gt;  &lt;/p&gt;
&lt;p&gt;覺得有點訝異和好奇&lt;br /&gt;
查了下官網也沒啥相關公告&lt;br /&gt;
然後去翻了一下&lt;a href="https://projects.archlinux.org/svntogit/packages.git/commit/?h=packages/pacman-mirrorlist&amp;amp;id=6438bca958924f781d166c2a473abecd3db54670"&gt;最新的 commit log&lt;/a&gt;&lt;br /&gt;
和舊的比較一下&lt;br /&gt;
發現是同一個 committer  &lt;/p&gt;
&lt;p&gt;&lt;img alt="Same Committer" src="/files/pacman-mirrorlist-taiwan-vs-taiwan-province-of-china/same_committer.png" /&gt;&lt;br /&gt;
再去看了一下 &lt;a href="https://www.archlinux.org/download/"&gt;Arch Linux 官網的 Download Page&lt;/a&gt;&lt;br /&gt;
台灣的部分還真的改回來變成 Taiwan 了  &lt;/p&gt;
&lt;p&gt;&lt;img alt="Taiwan" src="/files/pacman-mirrorlist-taiwan-vs-taiwan-province-of-china/taiwan.png" /&gt;  &lt;/p&gt;
&lt;p&gt;於是又去找了一下 &lt;a href="http://webcache.googleusercontent.com/search?q=cache:nsRN9P-SvTgJ:https://www.archlinux.org/download/+&amp;amp;cd=1&amp;amp;hl=en&amp;amp;ct=clnk&amp;amp;gl=tw"&gt;Google Cache&lt;/a&gt; 確認一下是不是最近發生的事&lt;br /&gt;
發現還是舊的 Taiwan (Province of China)  &lt;/p&gt;
&lt;p&gt;&lt;img alt="Province of China" src="/files/pacman-mirrorlist-taiwan-vs-taiwan-province-of-china/province_of_china.png" /&gt;  &lt;/p&gt;
&lt;p&gt;所以就確定是最近發生的事了  &lt;/p&gt;
&lt;p&gt;不過我不太清楚改回來的原因是啥&lt;br /&gt;
（其實我也不知道當初被從 Taiwan 改成 Taiwan (Province of China) 的原因）&lt;br /&gt;
發個&lt;a href="http://www.plurk.com/p/ki0evh"&gt;噗浪狀態&lt;/a&gt;後就有人跑去要求 &lt;a href="https://bugs.archlinux.org/task/30444#actionbuttons"&gt;re-open&lt;/a&gt; 了 囧  &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;2014-10-29: A request to re-open the task has been made. Reason for request: ISO claimed that the country name is not part of the ISO 3166 standard, thus it's still a WONTFIX for the upstream, ArchLinux is responsible for the issue for regarding something not-in-fact-in-a-standard as standard, thus request re-open. Falling back to the complex procedure of finding country names &lt;em&gt;least&lt;/em&gt; irritating for everyone is both sane and required.  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img alt="Re-open" src="/files/pacman-mirrorlist-taiwan-vs-taiwan-province-of-china/re_open.png" /&gt;  &lt;/p&gt;
&lt;p&gt;且看這次會如何回應吧?  &lt;/p&gt;
&lt;hr /&gt;
&lt;h1&gt;Reference&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://planykao.blogspot.tw/2012/07/taiwan-is-not-province-of-china.html"&gt;http://planykao.blogspot.tw/2012/07/taiwan-is-not-province-of-china.html&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">m157q</dc:creator><pubDate>Tue, 27 Oct 2015 12:55:00 +0800</pubDate><guid isPermaLink="false">tag:blog.m157q.tw,2014-10-29:posts/2014/10/29/pacman-mirrorlist-taiwan-vs-taiwan-province-of-china/</guid><category>Linux</category><category>Taiwan</category><category>Arch Linux</category><category>pacman</category><category>mirrorlist</category></item><item><title>GHC 7.8.2 造成 Arch Linux 無法升級的解法</title><link>https://blog.m157q.tw/posts/2014/05/21/the-solution-for-system-upgrade-failure-caused-by-ghc-7-8-2/</link><description>&lt;p&gt;官方公告 &lt;a href="https://www.archlinux.org/news/managing-haskell-packages-with-ghc-782/"&gt;Managing Haskell packages with GHC 7.8.2&lt;/a&gt;  &lt;/p&gt;
&lt;p&gt;裡面寫了  &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Moving every package that is not ghc or cabal-install to [community]. This will allow better support of the core common haskell libraries since I do not actually use these packages due to cabal-install.  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;其實我根本看不懂該怎麼做= ="&lt;br /&gt;
反正我一定不是唯一一個看不懂的(?)&lt;br /&gt;
所以就查到了這篇 &lt;a href="https://bbs.archlinux.org/viewtopic.php?pid=1412908"&gt;[SOLVED] Problems upgrading some haskell packages&lt;/a&gt;&lt;br /&gt;
遇到的情形似乎跟我一樣&lt;br /&gt;
下了 &lt;code&gt;sudo pacman -Syu&lt;/code&gt; 後噴了  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;:: haskell-transformers: requires ghc=7.6.3-1  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;然後  &lt;code&gt;pacman -Qs ghc&lt;/code&gt; 後也一樣已經安裝了&lt;br /&gt;
然後底下有人提供了解法  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo pacman -Rcs haskell-transformers  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;把跟 &lt;code&gt;haskell-transformers&lt;/code&gt; 有關的套件都移除掉以後&lt;br /&gt;
再重新下一次 &lt;code&gt;sudo pacman -Syu&lt;/code&gt; 就可以了  &lt;/p&gt;
&lt;p&gt;底下的回覆有人的解釋是  &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;haskell-transformers was recently removed from extra.&lt;br /&gt;
It depends on a specific version of ghc.&lt;br /&gt;
There is a newer version of ghc in the repos.&lt;br /&gt;
Since haskell-transformers was removed there's no upgrade path to resolve the issue.&lt;br /&gt;
You'll have to do it manually.&lt;br /&gt;
Edit: Removed from the repos entirely.&lt;br /&gt;
Not moved from extra to community like the other haskell packages.  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;恩 應該就是這樣吧  &lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">m157q</dc:creator><pubDate>Tue, 27 Oct 2015 13:10:00 +0800</pubDate><guid isPermaLink="false">tag:blog.m157q.tw,2014-05-21:posts/2014/05/21/the-solution-for-system-upgrade-failure-caused-by-ghc-7-8-2/</guid><category>Linux</category><category>Haskell</category><category>Arch Linux</category><category>GHC</category><category>sysadmin</category></item><item><title>vsftpd virtual user broken after upgrade pam from 1.1.8-2 to 1.1.8-3 in Arch Linux</title><link>https://blog.m157q.tw/posts/2014/02/21/vsftpd-virtual-user-broken-after-upgrade-pam-from-1-1-8-2-to-1-1-8-3-in-arch-linux/</link><description>&lt;p&gt;pam 升到 1.1.8-3 後，vsftpd 的 virtual user 功能就爛掉了  &lt;/p&gt;
&lt;p&gt;檢查了 &lt;code&gt;auth.log&lt;/code&gt; 以後，發現噴了  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Feb 20 00:35:49 localhost vsftpd:  
PAM unable to dlopen(/usr/lib/security/pam_userdb.so):  
/usr/lib/security/pam_userdb.so: cannot open shared object file:  
No such file or directory  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;進 &lt;code&gt;/usr/lib/security&lt;/code&gt; 裡查看，發現 &lt;code&gt;pam_userdb.so&lt;/code&gt; 消失了  &lt;/p&gt;
&lt;p&gt;推測問題出在這，到 Google 丟了 &lt;code&gt;/usr/lib/security/pam_userdb.so&lt;/code&gt; 進行搜尋  &lt;/p&gt;
&lt;p&gt;查到這兩篇文章  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://bbs.archlinux.org/viewtopic.php?pid=1382541"&gt;pam_userdb.so gone after upgrading pam-1.1.8-2 -&amp;gt; pam-1.1.8-3&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://bugs.archlinux.org/task/38848"&gt;FS#38848 - [pam] /usr/lib/security/pam_userdb.so missing&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;原來是被移除掉了  &lt;/p&gt;
&lt;p&gt;從底下的回應看起來好像只看到 vsftpd 的 virtual user 功能受到影響  &lt;/p&gt;
&lt;p&gt;兩篇的回應都有人提到 &lt;code&gt;pam_pwdfile&lt;/code&gt; 這個套件，&lt;br /&gt;
不過是在 AUR 上而非官方套件，而且用的人好像有點少，所以不考慮。  &lt;/p&gt;
&lt;p&gt;目前的解法還是用  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo pacman -U /var/cache/pacman/pkg/pam-1.1.8-2-x86_64.pkg.tar.xz  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;將 pam 先降級回 &lt;code&gt;pam 1.1.8-2&lt;/code&gt;  &lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">m157q</dc:creator><pubDate>Tue, 27 Oct 2015 13:14:00 +0800</pubDate><guid isPermaLink="false">tag:blog.m157q.tw,2014-02-21:posts/2014/02/21/vsftpd-virtual-user-broken-after-upgrade-pam-from-1-1-8-2-to-1-1-8-3-in-arch-linux/</guid><category>Linux</category><category>Arch Linux</category><category>vsftpd</category><category>pam</category><category>sysadmin</category></item><item><title>Arch Linux Quick Installation with GPT in BIOS</title><link>https://blog.m157q.tw/posts/2013/12/30/arch-linux-quick-installation-with-gpt-in-bios/</link><description>&lt;h2&gt;Preface&lt;/h2&gt;
&lt;p&gt;A quick installation based on &lt;a href="https://wiki.archlinux.org/index.php/Beginners'_Guide"&gt;Arch wiki - Beginners' Guide&lt;/a&gt;  &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;WITHOUT NETWORK CONFIGURATION&lt;br /&gt;
(INSTALL IN VIRTUAL MACHINE USING DHCP).&lt;br /&gt;
YOU NEED TO SETUP THE NETWORK OF THE MACHINE FIRST.  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr /&gt;
&lt;h2&gt;Network&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://wiki.archlinux.org/index.php/Network_configuration"&gt;Network configuration - ArchWiki&lt;/a&gt;  &lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;Partition&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;# lsblk&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;Check you are partitioning on the right disk.  &lt;/li&gt;
&lt;li&gt;(assume &lt;code&gt;/dev/sda&lt;/code&gt; here)  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;# cgdisk /dev/sda&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;Partition Table  &lt;ul&gt;
&lt;li&gt;GPT - &lt;code&gt;ef02&lt;/code&gt; (BIOS boot partition) =&amp;gt; &lt;code&gt;/dev/sda1&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;1M  &lt;/li&gt;
&lt;li&gt;MUST be the first partition of the disk.  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;IMPORTANT!! Set to BIOS Boot partition for grub2&lt;/code&gt;.  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;/ - 8300 (Linux filesystem) =&amp;gt; &lt;code&gt;/dev/sda2&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;swap - 8200 (Linux swap) =&amp;gt; &lt;code&gt;/dev/sda3&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;home - 8302 (Linux /home) =&amp;gt; &lt;code&gt;/dev/sda4&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Write -&amp;gt; yes  &lt;/li&gt;
&lt;li&gt;QUIT  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;# lsblk&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;Check if the partition scheme of the disk is right.  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;h2&gt;Create Filesystem&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;# mkfs.ext4 /dev/sda2&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;&lt;code&gt;ext4&lt;/code&gt; for &lt;code&gt;/&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;# mkfs.ext4 /dev/sda4&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;&lt;code&gt;ext4&lt;/code&gt; for &lt;code&gt;home&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;# mkswap /dev/sda3 &amp;amp;&amp;amp; swapon /dev/sda3&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;&lt;code&gt;swap&lt;/code&gt; for &lt;code&gt;swap&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Mount partitionis&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;# mount /dev/sda2 /mnt&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;# mkdir /mnt/home &amp;amp;&amp;amp; mount /dev/sda4 /mnt/home&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Select a mirror&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;# vi /etc/pacman.d/mirrorlist&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;Choose a mirror site that is the nearest from your machine  &lt;/li&gt;
&lt;li&gt;Copy it to the top of this mirrorlist.  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Install the base system&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;# pacstrap /mnt base base-devel&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Generate fstab&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;# genfstab -p /mnt &amp;gt; /mnt/etc/fstab&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;# vi /mnt/etc/fstab&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;Check if the fstab is right.  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;h2&gt;Chroot and configure the base system&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;# arch-chroot /mnt /bin/bash&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;After chroot, use bash.  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Locale &amp;amp; Keymap&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;# vi /etc/locale.gen&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;Select needed encoding and uncomment them.  &lt;/li&gt;
&lt;li&gt;en_US.UTF-8 UTF-8  &lt;/li&gt;
&lt;li&gt;zh_TW.UTF-8 UTF-8  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;# locale-gen&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;# echo "LANG=en_US.UTF-8" &amp;gt; /etc/locale.conf&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;# echo "KEYMAP=us" &amp;gt; /etc/vconsole.conf&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Timezone &amp;amp; Hardclock &amp;amp; Hostname&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;# ln -s /usr/share/zoneinfo/Asia/Taipei /etc/localtime&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;# hwclock --systohc --utc&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;# echo "$myhostname" &amp;gt; /etc/hostname&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Configure the network (DHCP)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;# systemctl enable dhcpcd.service&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;I use DHCP for the virtual machine.  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;For static IP  and wireless, Check the Official Guide  &lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Network_configuration"&gt;Network configuration - ArchWiki&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Create an initial ramdisk environment&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;If you won't modify &lt;code&gt;/etc/mkinitcpio.conf&lt;/code&gt;, you can just skip this step.  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;# mkinitcpio -p linux&lt;/code&gt; after modified &lt;code&gt;/etc/mkinitcpio.conf&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Set User&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;# passwd&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;set root password.  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;# useradd -m $user&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;add a user with home directory.  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;# passwd $user&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;set the password for the user.  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;h2&gt;Install and configure a bootloader&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;# pacman -S grub&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;# vi /etc/default/grub&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;&lt;a href="https://bugs.archlinux.org/task/38041?project=1&amp;amp;cat%5B0%5D=31&amp;amp;string=grub"&gt;For a bug of grub I've met&lt;/a&gt;.  &lt;/li&gt;
&lt;li&gt;Add &lt;code&gt;GRUB_DISABLE_SUBMENU=y&lt;/code&gt; at the end of &lt;code&gt;/etc/default/grub&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;# grub-mkconfig -o /boot/grub/grub.cfg&lt;/code&gt;  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Generate the configuration file of grub  &lt;blockquote&gt;
&lt;p&gt;If you didn't add the &lt;code&gt;GRUB_DISABLE_SUBMENU=y&lt;/code&gt; mentioned above&lt;br /&gt;
you would get error message and fail here.  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;# grub-install --target=i386-pc --recheck /dev/sda&lt;/code&gt;  &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If you didn't mark the GPT partition (1007KiB)&lt;br /&gt;
as a &lt;code&gt;BIOS Boot Partition&lt;/code&gt;&lt;br /&gt;
you would get error message and fail here.&lt;br /&gt;
the solution is in &lt;a href="https://wiki.archlinux.org/index.php/GRUB#Intel_BIOS_not_booting_GPT"&gt;GRUB - ArchWiki&lt;/a&gt;  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;h2&gt;After installation&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;# exit&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;# umount -R /mnt&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;unmount the partitions  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;# reboot&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Beginners'_Guide"&gt;Arch wiki - Beginner's Guide&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/GRUB#Intel_BIOS_not_booting_GPT"&gt;Arch wiki - GRUB - Intel BIOS not booting GPT&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://bbs.archlinux.org/viewtopic.php?id=173921"&gt;[solved] Grub Update gives Syntax error&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://bugs.archlinux.org/task/38041?project=1&amp;amp;cat%5B0%5D=31&amp;amp;string=grub"&gt;FS#38041 - grub 1:2.00.1282.g5ae5c54-1 will not generate grub.cfg file syntax errors&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="http://xatierlike.blogspot.tw/2012/10/archlinux-installation.html"&gt;Archlinux installation - xatierlike&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">m157q</dc:creator><pubDate>Tue, 27 Oct 2015 19:08:00 +0800</pubDate><guid isPermaLink="false">tag:blog.m157q.tw,2013-12-30:posts/2013/12/30/arch-linux-quick-installation-with-gpt-in-bios/</guid><category>Linux</category><category>Arch Linux</category><category>Guide</category><category>GPT</category><category>BIOS</category></item><item><title>Disable auto suspend while the laptop lid close in Arch Linux</title><link>https://blog.m157q.tw/posts/2013/10/15/disable-auto-suspend-while-the-laptop-lid-close-in-arch-linux/</link><description>&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Use editor to modify the configuration file of the systemd-logind&lt;br /&gt;
&lt;code&gt;# vim /etc/systemd/logind.conf&lt;/code&gt;  &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Find&lt;br /&gt;
&lt;code&gt;#HandleLidSwitch=suspend&lt;/code&gt;  &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Uncommnet it and then change it to&lt;br /&gt;
&lt;code&gt;HandleLidSwitch=ignore&lt;/code&gt;  &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;After saving the modification, we need to restart the systemd-logind&lt;br /&gt;
&lt;code&gt;# systemctl restart systemd-logind&lt;/code&gt;  &lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Now the change should be effective now.  &lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;Reference&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://unix.stackexchange.com/questions/52643/how-to-disable-auto-suspend-when-i-close-laptop-lid"&gt;How to disable auto suspend when I close laptop lid?&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">m157q</dc:creator><pubDate>Tue, 27 Oct 2015 21:24:00 +0800</pubDate><guid isPermaLink="false">tag:blog.m157q.tw,2013-10-15:posts/2013/10/15/disable-auto-suspend-while-the-laptop-lid-close-in-arch-linux/</guid><category>Linux</category><category>Arch Linux</category><category>Laptop</category><category>systemd</category></item><item><title>Unzip 7zip file by p7zip on Arch Linux</title><link>https://blog.m157q.tw/posts/2013/04/11/unzip-7zip-file-by-p7zip-on-arch-linux/</link><description>&lt;p&gt;組語作業給的 template 是用 &lt;code&gt;7zip&lt;/code&gt; 打包成副檔名為 &lt;code&gt;.7z&lt;/code&gt; 的檔案&lt;br /&gt;
為了寫 report 想要把 &lt;code&gt;.7z&lt;/code&gt; 的 file 解壓縮  &lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;因為習慣在 CLI 環境下工作&lt;br /&gt;
於是就 google 搜尋了一下有沒有相關的 command&lt;br /&gt;
然後找到了 &lt;a href="http://blog.xuite.net/michaelr/linux/17595860"&gt;Linux下解開7z丶7zip檔 @ 麥克星球 Linux Fedora 心得筆記 :: 隨意窩 Xuite日誌&lt;/a&gt;  &lt;/p&gt;
&lt;h2&gt;Keyword: p7zip&lt;/h2&gt;
&lt;p&gt;在 Arch Linux 下&lt;br /&gt;
&lt;code&gt;$ pacman -Ss p7zip&lt;/code&gt;  &lt;/p&gt;
&lt;p&gt;出現以下的訊息  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;extra/p7zip 9.20.1-6  
Command-line version of the 7zip compressed file archiver  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;接著就&lt;br /&gt;
&lt;code&gt;$ sudo pacman -S p7zip&lt;/code&gt;  &lt;/p&gt;
&lt;p&gt;安裝完畢之後會多一個 7z 的指令可以使用  &lt;/p&gt;
&lt;p&gt;想看 man page 的話就&lt;br /&gt;
&lt;code&gt;$ man 7z&lt;/code&gt;&lt;br /&gt;
我是覺得沒有寫的很清楚啦  &lt;/p&gt;
&lt;p&gt;所以我又去找了一些網站  &lt;/p&gt;
&lt;p&gt;底下這個網站有些簡單易懂的範例&lt;br /&gt;
&lt;a href="https://www.ibm.com/developerworks/community/blogs/6e6f6d1b-95c3-46df-8a26-b7efd8ee4b57/entry/how_to_use_7zip_on_linux_command_line144?lang=en"&gt;How to use 7zip on Linux command Line (Real world open source)&lt;/a&gt;  &lt;/p&gt;
&lt;p&gt;不過還是沒找到我想要的  &lt;/p&gt;
&lt;p&gt;如果我直接下&lt;br /&gt;
&lt;code&gt;$ 7z e xxx.7z&lt;/code&gt;&lt;br /&gt;
就會有悲劇發生  &lt;/p&gt;
&lt;p&gt;xxx.7z 裏面的東西會全部跟我的當前資料夾所有東西混在一起!!&lt;br /&gt;
所以要怎樣才能讓 7z 在解壓縮一個檔案的時候順便新建一個資料夾把檔案都塞進去呢?&lt;br /&gt;
我 google 到了有人問了同樣的問題(果然不是只有我笨)&lt;br /&gt;
&lt;a href="http://superuser.com/questions/95902/7-zip-and-unzipping-from-command-line"&gt;7 zip - 7-Zip and unzipping from command line - Super User&lt;/a&gt;  &lt;/p&gt;
&lt;p&gt;結果原來只要&lt;br /&gt;
&lt;code&gt;$ 7z x xxx.7z&lt;/code&gt;  &lt;/p&gt;
&lt;p&gt;沒錯 只要把 e 改成 x 就好了  &lt;/p&gt;
&lt;p&gt;後來看到其實在 man page 有寫了這些東西  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;FUNCTION LETTERS  
     a Add  
     d Delete  
     e Extract  
     l List  
     t Test  
     u Update  
     x eXtract with full paths  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;沒錯 就是最後那行! x!  &lt;/p&gt;
&lt;p&gt;總之就是這樣 以後解壓縮 .7z 的 file 也跟 .tar .zip 那些檔案一樣&lt;br /&gt;
用 CLI 就可以解決啦  &lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://blog.xuite.net/michaelr/linux/17595860"&gt;Linux下解開7z丶7zip檔 @ 麥克星球 Linux Fedora 心得筆記 :: 隨意窩 Xuite日誌&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.ibm.com/developerworks/community/blogs/6e6f6d1b-95c3-46df-8a26-b7efd8ee4b57/entry/how_to_use_7zip_on_linux_command_line144?lang=en"&gt;How to use 7zip on Linux command Line (Real world open source)&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="http://superuser.com/questions/95902/7-zip-and-unzipping-from-command-line"&gt;7 zip - 7-Zip and unzipping from command line - Super User&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">m157q</dc:creator><pubDate>Mon, 26 Oct 2015 14:19:00 +0800</pubDate><guid isPermaLink="false">tag:blog.m157q.tw,2013-04-11:posts/2013/04/11/unzip-7zip-file-by-p7zip-on-arch-linux/</guid><category>Linux</category><category>Arch Linux</category><category>Linux</category><category>7zip</category><category>CLI</category></item><item><title>Network Administration Hw1: Setup DHCP, NAT, Firewall</title><link>https://blog.m157q.tw/posts/2013/04/09/network-administration-hw1-setup-dhcp-nat-firewall/</link><description>&lt;h2&gt;Setup DHCP, NAT, Firewall&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;I done this homework in Arch Linux  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr /&gt;
&lt;h2&gt;SPEC&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Server - dhcp server, NAT, Firewall, ftp-proxy, transparent http proxy (TP)  
(home-q) dhcp server =&amp;gt; dhcpd;  
         NAT, Firewall, ftp-proxy =&amp;gt; iptables;  
         transparent http proxy =&amp;gt; squid;  
         外網網卡 enp0s18 140.113.27.37  
         內網網卡 enp0s19 172.16.1.254  
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;HostA -  dhcp client with private ip (172.16.1.101~172.16.1.200)  
(www-q)  http client browse through Server&amp;#39;s TP  
         dhcp client =&amp;gt; dhcpcd;  
         內網網卡 enp0s18  
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;HostB -  dhcp client with static private ip (172.16.1.30)  
(mail-q) provide ssh service (bind on Server&amp;#39;s 222 port)  
         provide ftp service (bind on Server&amp;#39;s 21 port)  
         ftp service =&amp;gt; vsftpd;  
         內網網卡 enp0s18; MAC 5a:49:97:32:c3:13 (拿來給 dhcpd 發 static private ip)  
&lt;/pre&gt;&lt;/div&gt;


&lt;hr /&gt;
&lt;h2&gt;DHCP server (on home-q)&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Dhcpd"&gt;https://wiki.archlinux.org/index.php/Dhcpd&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="http://linux.vbird.org/linux_server/0340dhcp.php"&gt;http://linux.vbird.org/linux_server/0340dhcp.php&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;基本上就照著 Arch wiki 作&lt;br /&gt;
&lt;code&gt;# ip addr add 172.16.1.254/24 dev enp0s19&lt;/code&gt;&lt;br /&gt;
然後在 &lt;code&gt;/etc/dhcpd.conf&lt;/code&gt; 中寫下規則  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;option&lt;/span&gt; &lt;span class="nt"&gt;domain-name&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nctucs.net&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt;  
&lt;span class="nt"&gt;option&lt;/span&gt; &lt;span class="nt"&gt;domain-name-servers&lt;/span&gt; &lt;span class="nt"&gt;8&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;8&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;8&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;8&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;140&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;113&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt;  
&lt;span class="nt"&gt;option&lt;/span&gt; &lt;span class="nt"&gt;subnet-mask&lt;/span&gt; &lt;span class="nt"&gt;255&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;255&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;255&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt;  
&lt;span class="nt"&gt;option&lt;/span&gt; &lt;span class="nt"&gt;routers&lt;/span&gt; &lt;span class="nt"&gt;172&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;16&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;254&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt;  
&lt;span class="nt"&gt;option&lt;/span&gt; &lt;span class="nt"&gt;broadcast-address&lt;/span&gt; &lt;span class="nt"&gt;172&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;16&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;255&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt;  
&lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt;  
&lt;span class="nt"&gt;default-lease-time&lt;/span&gt; &lt;span class="nt"&gt;3600&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt;  
&lt;span class="nt"&gt;max-lease-time&lt;/span&gt; &lt;span class="nt"&gt;7200&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt;  
&lt;span class="nt"&gt;ddns-update-style&lt;/span&gt; &lt;span class="nt"&gt;none&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt;  
&lt;span class="nt"&gt;log-facility&lt;/span&gt; &lt;span class="nt"&gt;local7&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt;  
&lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt;  
&lt;span class="p"&gt;#&lt;/span&gt;&lt;span class="nn"&gt;pool&lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt;  
&lt;span class="nt"&gt;subnet&lt;/span&gt; &lt;span class="nt"&gt;172&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;16&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;0&lt;/span&gt; &lt;span class="nt"&gt;netmask&lt;/span&gt; &lt;span class="nt"&gt;255&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;255&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;255&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;0&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt;  
&lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt;range&lt;/span&gt; &lt;span class="err"&gt;172.16.1.101&lt;/span&gt; &lt;span class="err"&gt;172.16.1.200&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt;  
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt;  
&lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt;  
&lt;span class="p"&gt;#&lt;/span&gt;&lt;span class="nn"&gt;static&lt;/span&gt; &lt;span class="nt"&gt;private&lt;/span&gt; &lt;span class="nt"&gt;ip&lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt;  
&lt;span class="nt"&gt;host&lt;/span&gt; &lt;span class="nt"&gt;mail-q&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt;  
&lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt;hardware&lt;/span&gt; &lt;span class="err"&gt;ethernet&lt;/span&gt; &lt;span class="err"&gt;5&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;49&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;97&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;c3&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt;  
&lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt;fixed-address&lt;/span&gt; &lt;span class="err"&gt;172.16.1.30&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt;  
&lt;span class="p"&gt;}&lt;/span&gt;  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;為了讓 dhcpd 只 listen 特定的 interface&lt;br /&gt;
在 &lt;code&gt;/etc/conf.d/dhcp&lt;/code&gt; 中 把 &lt;code&gt;DHCP4_ARGS="-q"&lt;/code&gt; 改成 &lt;code&gt;DHCP4_ARGS="-q enp0s19"&lt;/code&gt;&lt;br /&gt;
然後 &lt;code&gt;# systemctl start dhcpd4&lt;/code&gt; 應該就能成功當起 dhcp server 了  &lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;DHCP client (on www-q and mail-q)&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Network_Configuration#Dynamic_IP_address"&gt;https://wiki.archlinux.org/index.php/Network_Configuration#Dynamic_IP_address&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;一樣照著 arch wiki 作 預設應該就有裝 dhcpcd 了&lt;br /&gt;
&lt;code&gt;# dhcpcd enp0s18&lt;/code&gt;&lt;br /&gt;
這裡的 enp0s18 是內網網卡&lt;br /&gt;
然後 &lt;code&gt;# systemctl start dhcpcd@enp0s18&lt;/code&gt;&lt;br /&gt;
用 &lt;code&gt;$ lspci -k&lt;/code&gt; 察看跟網卡相關的 modules&lt;br /&gt;
結果如下  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;13.0&lt;/span&gt; &lt;span class="n"&gt;Ethernet&lt;/span&gt; &lt;span class="n"&gt;controller&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Realtek&lt;/span&gt; &lt;span class="n"&gt;Semiconductor&lt;/span&gt; &lt;span class="n"&gt;Co&lt;/span&gt;&lt;span class="o"&gt;.,&lt;/span&gt; &lt;span class="n"&gt;Ltd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="n"&gt;RTL&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;8139&lt;/span&gt;&lt;span class="sr"&gt;/8139C/&lt;/span&gt;&lt;span class="mi"&gt;8139&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rev&lt;/span&gt; &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;  
&lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="n"&gt;Subsystem&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Red&lt;/span&gt; &lt;span class="n"&gt;Hat&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Inc&lt;/span&gt; &lt;span class="n"&gt;Device&lt;/span&gt; &lt;span class="mi"&gt;1100&lt;/span&gt;  
&lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="n"&gt;Kernel&lt;/span&gt; &lt;span class="n"&gt;driver&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="n"&gt;use&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;8139&lt;/span&gt;&lt;span class="n"&gt;cp&lt;/span&gt;  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;所以可以知道在 &lt;code&gt;/etc/modules-load/realtek.conf&lt;/code&gt;  &lt;/p&gt;
&lt;h3&gt;Note&lt;/h3&gt;
&lt;p&gt;這邊卡關了一下是因為 dv 也在 140.113.27 網段底下架了一台 dhcp Server&lt;br /&gt;
結果我的 client 一直拿到他的 server 發出來的 ip 而不是我自己架的&lt;br /&gt;
看了鳥哥的網頁&lt;br /&gt;
&lt;a href="http://linux.vbird.org/linux_server/0340dhcp.php#client_linux"&gt;http://linux.vbird.org/linux_server/0340dhcp.php#client_linux&lt;/a&gt;&lt;br /&gt;
裏面有提到在 client 端上的 /var/lib/dhclient/ 裏面有跟租約相關的檔案&lt;br /&gt;
可以用 vim 開啟直接改寫&lt;br /&gt;
&lt;code&gt;option dhcp-server-identifier 172.16.1.254&lt;/code&gt; 指定 dhcp Server&lt;br /&gt;
可是在 archlinux 底下無法直接這樣改寫，用vim開起來會是亂碼&lt;br /&gt;
後來是在 client 端的 &lt;code&gt;/etc/dhcpcd.conf&lt;/code&gt; 中加上 &lt;code&gt;static routers=172.16.1.254&lt;/code&gt; 解決  &lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;NAT &amp;amp; Firewall&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;In Linux we use iptables, while in FreeBSD we use PF  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://linux.vbird.org/linux_server/0250simple_firewall.php"&gt;http://linux.vbird.org/linux_server/0250simple_firewall.php&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Internet_Share"&gt;https://wiki.archlinux.org/index.php/Internet_Share&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Simple_Stateful_Firewall"&gt;https://wiki.archlinux.org/index.php/Simple_Stateful_Firewall&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Iptables"&gt;https://wiki.archlinux.org/index.php/Iptables&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Router"&gt;https://wiki.archlinux.org/index.php/Router&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.revsys.com/writings/quicktips/nat.html"&gt;http://www.revsys.com/writings/quicktips/nat.html&lt;/a&gt;&lt;br /&gt;
&lt;br /&gt;
參考了以上的連結之後，目前 iptables 的設定如下  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# Generated by iptables-save v1.4.18 on Tue Apr  9 04:40:40 2013                
*mangle                                                                        
:PREROUTING ACCEPT [369:34165]                                                  
:INPUT ACCEPT [278:20862]                                                      
:FORWARD ACCEPT [91:13303]                                                      
:OUTPUT ACCEPT [153:20248]                                                      
:POSTROUTING ACCEPT [244:33551]                                                
COMMIT                                                                          
# Completed on Tue Apr  9 04:40:40 2013                                        
# Generated by iptables-save v1.4.18 on Tue Apr  9 04:40:40 2013                
*filter                                                                        
:INPUT ACCEPT [3:418]                                                          
:FORWARD ACCEPT [91:13303]                                                      
:OUTPUT ACCEPT [153:20248]                                                      
:BADHOST - [0:0]                                                                
-A INPUT -j BADHOST                                                            
-A BADHOST -s 140.113.101.10 -j DROP                                            
-A INPUT -i enp0s18 -p icmp -m icmp --icmp-type 8 -j DROP                      
-A INPUT -m state --state INVALID -j DROP                                      
-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT                        
-A INPUT -i lo -j ACCEPT                                                        
-A INPUT -i enp0s18 -s 140.113.230.88 -j ACCEPT                                
-A FORWARD -m state --state INVALID -j DROP                                    
-A FORWARD -s 140.113.17.0/24 -d 172.16.1.30 -p tcp --dport 21 -j REJECT --reject-with tcp-reset  
-A FORWARD -m state --state RELATED,ESTABLISHED -j ACCEPT  
-A FORWARD -s 140.113.230.88 -d 172.16.1.30 -p tcp --dport 21:22 -j ACCEPT      
-A FORWARD -s 140.113.27.47 -d 172.16.1.30 -p tcp --dport 22 -j ACCEPT        
-A FORWARD -s 140.113.235.0/24 -d 172.16.1.30 -p tcp --dport 21 -j ACCEPT      
-A FORWARD -s 140.113.17.0/24 -d 172.16.1.30 -p tcp --dport 22 -j ACCEPT        
-A FORWARD -d 172.16.1.30 -p tcp --dport 21 -j DROP                            
-A FORWARD -d 172.16.1.30 -p tcp --dport 22 -j DROP                            
COMMIT                                                                          
# Completed on Tue Apr  9 04:40:40 2013                                        
# Generated by iptables-save v1.4.18 on Tue Apr  9 04:40:40 2013                
*nat                                                                            
:PREROUTING ACCEPT [2:426]                                                      
:INPUT ACCEPT [1:354]                                                          
:OUTPUT ACCEPT [0:0]                                                            
:POSTROUTING ACCEPT [1:60]                                                      
-A PREROUTING -i enp0s18 -p tcp --dport 21 -j DNAT --to-destination 172.16.1.30:21  
-A PREROUTING -i enp0s18 -p tcp --dport 222 -j DNAT --to-destination 172.16.1.30:22  
-A PREROUTING -s 172.16.1.0/24 -i enp0s19 -p tcp -m tcp --dport 80 -j REDIRECT --to-ports 3128  
-A POSTROUTING -s 172.16.1.0/24 -o enp0s18 -j MASQUERADE                        
COMMIT                                                                          
# Completed on Tue Apr  9 04:40:40 2013  
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;140.113.230.88 是寢室的 ip&lt;br /&gt;
140.113.27.47 是社窩無網的ip&lt;br /&gt;
為了方便操作用  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr /&gt;
&lt;h2&gt;Proxy&lt;/h2&gt;
&lt;h3&gt;ftp-proxy&lt;/h3&gt;
&lt;p&gt;好像在 iptables 就設定完了 根本不用像 FreeBSD 還要用 ftp-proxy&lt;br /&gt;
猜測是因為 &lt;code&gt;-A FORWARD -m state --state RELATED,ESTABLISHED -j ACCEPT&lt;/code&gt; 的緣故  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Squid"&gt;https://wiki.archlinux.org/index.php/Squid&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="http://linux.vbird.org/linux_server/0420squid.php"&gt;http://linux.vbird.org/linux_server/0420squid.php&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;transparent http proxy&lt;/h3&gt;
&lt;p&gt;在 &lt;code&gt;/etc/squid/squid.conf&lt;/code&gt; 中 &lt;code&gt;http_port&lt;/code&gt; 後面加上 &lt;code&gt;intercept&lt;/code&gt;  &lt;/p&gt;
&lt;p&gt;&lt;code&gt;http_port 3128 intercept&lt;/code&gt;  &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;鳥哥裏面是寫 &lt;code&gt;http_port 3128 transparent&lt;/code&gt;&lt;br /&gt;
在 &lt;a href="http://www.squid-cache.org/Doc/config/http_port/"&gt;http://www.squid-cache.org/Doc/config/http_port/&lt;/a&gt; 有寫到在 3.1 的版本以後&lt;br /&gt;
intercept - Rename of old 'transparent' option to indicate proper functionality.  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;把 &lt;code&gt;cache_dir ufs /var/cache/squid 256 16 256&lt;/code&gt; 的註解取消&lt;br /&gt;
再加上 &lt;code&gt;cache_mem 8 MB&lt;/code&gt; (預設是 8 MB 可以自己改)  &lt;/p&gt;
&lt;p&gt;&lt;code&gt;# squid -z&lt;/code&gt; (在 &lt;code&gt;/var/cache/squid/&lt;/code&gt; 建立資料夾)&lt;br /&gt;
&lt;code&gt;# squid -k check&lt;/code&gt; (檢查 &lt;code&gt;/etc/squid/squid.conf&lt;/code&gt; 有沒有問題)&lt;br /&gt;
&lt;code&gt;# systemctl start squid&lt;/code&gt;  &lt;/p&gt;
&lt;p&gt;之後在 iptables 的 nat table 中加上新的 rule,&lt;br /&gt;
把內網往外傳的 http request 轉到 squid 上&lt;br /&gt;
&lt;code&gt;-A PREROUTING -i enp0s19 -s 172.16.1.0/24 -p tcp --dport 80 -j REDIRECT --to-ports 3128&lt;/code&gt;&lt;br /&gt;
然後 reload iptables  &lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;vsftpd&lt;/h2&gt;
&lt;p&gt;遇到兩個錯誤  &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;500 OOPS: priv_sock_get_cmd&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;解決方法  &lt;ul&gt;
&lt;li&gt;&lt;a href="https://bbs.archlinux.org/viewtopic.php?id=147074"&gt;https://bbs.archlinux.org/viewtopic.php?id=147074&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;在 &lt;code&gt;/etc/vsftpd.conf&lt;/code&gt; 加上 &lt;code&gt;seccomp_sandbox=0&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;500 OOPS: vsftpd: refusing to run with writable root inside chroot()&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;解決方法  &lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.ubuntu-tw.org/modules/newbb/viewtopic.php?post_id=236642"&gt;http://www.ubuntu-tw.org/modules/newbb/viewtopic.php?post_id=236642&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;chmod a-w $dir&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;該 root dir 不可有寫入的權限  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr /&gt;
&lt;h2&gt;感想&lt;/h2&gt;
&lt;p&gt;用 Arch Linux 蠻方便的&lt;br /&gt;
基本上就照著鳥哥和 Arch Wiki 的教學邊做邊學應該就差不多了&lt;br /&gt;
不過跟上課教的好像差蠻多的XD&lt;br /&gt;
教的是 FreeBSD, PF&lt;br /&gt;
結果我用 Linux, iptables&lt;br /&gt;
這樣期中考真的沒問題嗎w?  &lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">m157q</dc:creator><pubDate>Tue, 27 Oct 2015 21:31:00 +0800</pubDate><guid isPermaLink="false">tag:blog.m157q.tw,2013-04-09:posts/2013/04/09/network-administration-hw1-setup-dhcp-nat-firewall/</guid><category>Linux</category><category>Arch Linux</category><category>iptables</category><category>Firewall</category><category>DHCP</category><category>NAT</category><category>sysadmin</category></item><item><title>Setup Static Ip Wired Network in Arch Linux</title><link>https://blog.m157q.tw/posts/2013/02/25/setup-static-ip-wired-network-in-arch-linux/</link><description>&lt;p&gt;因為之前安裝 Arch 的時候是用 wireless network 只要用就好  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo wifi-menu  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;或者是  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo wicd-gtk  
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;Arch 預設沒有裝 wicd,&lt;br /&gt;
要使用的話請先用 &lt;code&gt;$ sudo pacman -S wicd-gtk&lt;/code&gt; 安裝 wicd 後就可以解決&lt;br /&gt;
在執行 wicd-gtk 之前 要先  &lt;code&gt;$ sudo wicd&lt;/code&gt;  把 wicd run 起來&lt;br /&gt;
不然會有錯誤訊息顯示  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;以上是無線網路的部份 設定很簡單 有線網路的設定就比較麻煩一點  &lt;/p&gt;
&lt;hr /&gt;
&lt;blockquote&gt;
&lt;p&gt;寒假在家裡上網用 ADSL&lt;br /&gt;
照著上一篇的 &lt;a href="/posts/2013/02/20/setup-pppoe-wired-network-in-arch-linux/"&gt;[Arch Linux] Set up wired network with pppoe-setup&lt;/a&gt; 就可以完成  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr /&gt;
&lt;p&gt;開學後回到宿舍 得設定 static ip&lt;br /&gt;
一開始想說用 &lt;code&gt;wicd-gtk&lt;/code&gt; 新增一個 wired connection&lt;br /&gt;
然後把該設定的 property 設定完應該就能用了&lt;br /&gt;
結果就是連不上 然後發現  &lt;/p&gt;
&lt;p&gt;&lt;a href="https://wiki.archlinux.org/index.php/Beginners%27_guide#Wired"&gt;Beginners' guide - ArchWiki&lt;/a&gt; 其實有講&lt;br /&gt;
不過我這裡的方法不太一樣就是 但基本上大同小異  &lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;以下是我的作法：  &lt;/p&gt;
&lt;p&gt;在 &lt;code&gt;/etc/network.d/&lt;/code&gt; 底下建立設定檔  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ vim /etc/network.d/ethernet-dorm  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;其內容如下 #為註解部分  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;CONNECTION=&amp;#39;ethernet&amp;#39;  
DESCRIPTION=&amp;#39;A basic static ethernet connection using iproute&amp;#39;  
INTERFACE=&amp;#39;enp2s0&amp;#39;  
IP=&amp;#39;static&amp;#39;  
ADDR=&amp;#39;140.113.69.103&amp;#39;  
GATEWAY=&amp;#39;140.113.69.254&amp;#39;  
DNS=(&amp;#39;8.8.8.8&amp;#39;, &amp;#39;8.8.4.4&amp;#39;, &amp;#39;140.113.1.1&amp;#39;, &amp;#39;140.113.6.2&amp;#39;)  

## For IPv6 autoconfiguration  
#IP6=stateless  

## For IPv6 static address configuration  
#IP6=&amp;#39;static&amp;#39;  
#ADDR6=(&amp;#39;1234:5678:9abc:def::1/64&amp;#39; &amp;#39;1234:3456::123/96&amp;#39;)  
#ROUTES6=(&amp;#39;abcd::1234&amp;#39;)  
#GATEWAY6=&amp;#39;1234:0:123::abcd&amp;#39;  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;使用 &lt;code&gt;netcfg&lt;/code&gt; 這個指令  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo netcfg -u ethernet-dorm  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;這樣應該就可以啟動該網路連線了，如果設定都 OK 的話應該就會正常運作。  &lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">m157q</dc:creator><pubDate>Tue, 27 Oct 2015 22:11:00 +0800</pubDate><guid isPermaLink="false">tag:blog.m157q.tw,2013-02-25:posts/2013/02/25/setup-static-ip-wired-network-in-arch-linux/</guid><category>Linux</category><category>Arch Linux</category><category>sysadmin</category><category>Network</category></item><item><title>Setup PPPoE Wired Network in Arch Linux</title><link>https://blog.m157q.tw/posts/2013/02/20/setup-pppoe-wired-network-in-arch-linux/</link><description>&lt;p&gt;照著 &lt;a href="https://wiki.archlinux.org/index.php/Direct_modem_connection"&gt;Direct modem connection - ArchWiki&lt;/a&gt; 這部份設定  &lt;/p&gt;
&lt;p&gt;下 &lt;code&gt;# pppoe-setup&lt;/code&gt; 的時候 跟我說 &lt;code&gt;command not found&lt;/code&gt;  &lt;/p&gt;
&lt;p&gt;查了一下才知道要先裝上 &lt;code&gt;rp-pppoe&lt;/code&gt;  &lt;/p&gt;
&lt;p&gt;所以要設定之前記得先下  &lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ sudo pacman -S rp-pppoe&lt;/code&gt;  &lt;/p&gt;
&lt;p&gt;安裝完後再照著上面 ArchWiki 的步驟設定應該就行了  &lt;/p&gt;
&lt;p&gt;之前不知道要安裝 &lt;code&gt;rp-pppoe&lt;/code&gt;  &lt;/p&gt;
&lt;p&gt;結果跑去 ArchWiki 搜尋 &lt;code&gt;pppoe&lt;/code&gt;  &lt;/p&gt;
&lt;p&gt;跑出 &lt;a href="https://wiki.archlinux.org/index.php/pppd"&gt;pppd - ArchWiki&lt;/a&gt; 給我  &lt;/p&gt;
&lt;p&gt;照著做還是弄不起來 後來才知道要安裝 &lt;code&gt;rp-pppoe&lt;/code&gt;  &lt;/p&gt;
&lt;p&gt;所以就是先 &lt;code&gt;$ sudo pacman -S rp-pppoe&lt;/code&gt; 後  &lt;/p&gt;
&lt;p&gt;再 &lt;code&gt;$ sudo pppoe-setup&lt;/code&gt; 就行了  &lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">m157q</dc:creator><pubDate>Tue, 27 Oct 2015 22:03:00 +0800</pubDate><guid isPermaLink="false">tag:blog.m157q.tw,2013-02-20:posts/2013/02/20/setup-pppoe-wired-network-in-arch-linux/</guid><category>Linux</category><category>Arch Linux</category><category>Network</category><category>rp-pppoe</category><category>PPPoE</category></item><item><title>Arch Linux - USB鍵盤和USB滑鼠插上去卻無法使用的解法</title><link>https://blog.m157q.tw/posts/2013/02/17/solution-for-usb-keyboard-and-mouse-not-working-in-arch-linux/</link><description>&lt;p&gt;前幾天剛灌好 &lt;code&gt;Arch Linux x86_64&lt;/code&gt;&lt;br /&gt;
接上 USB外接滑鼠和鍵盤 竟然沒辦法使用 (我想用我的青軸鍵盤啊Q_Q)&lt;br /&gt;
光學滑鼠的紅色燈有亮 但不能動 鍵盤也沒反應&lt;br /&gt;
查了論壇上幾篇文章 有和我狀況類似的 可是照著弄還是不會動&lt;br /&gt;
大概都是問說有沒有在 &lt;code&gt;/etc/mkinitcpio.conf&lt;/code&gt; 裏面的 HOOKS 加入 usbinput  &lt;/p&gt;
&lt;p&gt;但參考了 &lt;a href="https://wiki.archlinux.org/index.php/Mkinitcpio#HOOKS"&gt;mkinitcpio - ArchWiki&lt;/a&gt; 後  &lt;/p&gt;
&lt;p&gt;裏面有著這行敘述  &lt;/p&gt;
&lt;p&gt;&lt;img alt="mkinitcpio" src="/files/solution-for-usb-keyboard-and-mouse-not-working-in-arch-linux/mkinitcpio.png" /&gt;  &lt;/p&gt;
&lt;p&gt;意思是 &lt;code&gt;usbinput&lt;/code&gt; 在 &lt;code&gt;mkinitcpio 0.13.0&lt;/code&gt; 已經被合併到 keyboard 裏面了&lt;br /&gt;
所以只要在 &lt;code&gt;/etc/mkinitcpio.conf&lt;/code&gt; 裏面的 &lt;code&gt;HOOKS&lt;/code&gt; 加入 &lt;code&gt;keyboard&lt;/code&gt;&lt;br /&gt;
(HOOKS裏面應該已經有其他東西了)&lt;br /&gt;
加入後，以我的 &lt;code&gt;mkinitcpio.conf&lt;/code&gt; 為例，會長的像這樣  &lt;/p&gt;
&lt;p&gt;&lt;code&gt;HOOKS="base udev autodetect modconf block filesystems keyboard fsck keymap"&lt;/code&gt;  &lt;/p&gt;
&lt;p&gt;修改完後 一定要記得下  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo mkinitcpio -p linux  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;(我就是忘記下這行指令才卡很久都沒外接滑鼠和鍵盤可以用=  =")  &lt;/p&gt;
&lt;p&gt;等他跑完 再把USB滑鼠和USB鍵盤插上去試試  &lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">m157q</dc:creator><pubDate>Tue, 27 Oct 2015 22:14:00 +0800</pubDate><guid isPermaLink="false">tag:blog.m157q.tw,2013-02-17:posts/2013/02/17/solution-for-usb-keyboard-and-mouse-not-working-in-arch-linux/</guid><category>Linux</category><category>Arch Linux</category><category>USB</category><category>mkinitcpio</category></item><item><title>用 ntfs-3g 自動 mount Windows 裡的 D 槽</title><link>https://blog.m157q.tw/posts/2013/02/17/automatically-mount-windows-partition-by-using-ntfs-3g/</link><description>&lt;p&gt;想在 Arch Linux 上 mount windows 裏面的 D 槽&lt;br /&gt;
因為之前用 Ubuntu 的時候 就一直拿 D 槽當作是共用的存檔地方&lt;br /&gt;
所以灌其他作業系統的時候也不太需要做啥備份  &lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;fstab&lt;/h2&gt;
&lt;p&gt;如果要讓 Linux 在開機的時候自動 mount D槽  &lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ sudoedit /etc/fstab&lt;/code&gt;  &lt;/p&gt;
&lt;p&gt;必須在 &lt;code&gt;/etc/fstab&lt;/code&gt; 中下寫類似這樣的 rule  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# /dev/sda5 (win_D)  
    UUID=01CC0B74E1BC55F0 /win_D ntfs-3g defaults,umask=000  0  2  
&lt;/pre&gt;&lt;/div&gt;


&lt;hr /&gt;
&lt;h2&gt;UUID&lt;/h2&gt;
&lt;p&gt;之後使用 &lt;code&gt;$ lsblk -f&lt;/code&gt; 這個指令去察看要 &lt;code&gt;mount&lt;/code&gt; 的硬碟的 UUID&lt;br /&gt;
然後把該 UUID 填寫在 &lt;code&gt;UUID=&lt;/code&gt; 的後面&lt;br /&gt;
不知道什麼是 UUID 的可參考 &lt;a href="https://zh.wikipedia.org/zh-tw/%E9%80%9A%E7%94%A8%E5%94%AF%E4%B8%80%E8%AF%86%E5%88%AB%E7%A0%81"&gt;通用唯一識別碼 - 維基百科，自由的百科全書&lt;/a&gt;  &lt;/p&gt;
&lt;p&gt;&lt;code&gt;/win_D&lt;/code&gt; 是你要把 D 槽 mount 在哪個目錄底下 可以自行修改  &lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;ntfs-3g&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;ntfs-3g&lt;/code&gt; 不知道這是什麼的請見 &lt;a href="https://zh.wikipedia.org/zh-tw/NTFS-3G"&gt;NTFS-3G - 維基百科，自由的百科全書&lt;/a&gt;  &lt;/p&gt;
&lt;p&gt;這裡如果用 &lt;code&gt;ntfs&lt;/code&gt; 的話會造成無法寫入和修改權限&lt;br /&gt;
所以要用 &lt;code&gt;ntfs-3g&lt;/code&gt;&lt;br /&gt;
預設應該是沒安裝的&lt;br /&gt;
在 Arch Linux 請先  &lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ sudo pacman -S ntfs-3g&lt;/code&gt;  &lt;/p&gt;
&lt;p&gt;&lt;code&gt;defaults,umask=000 0 2&lt;/code&gt; 後面這 3 個部份  &lt;/p&gt;
&lt;p&gt;請參考  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Fstab"&gt;fstab - ArchWiki&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="http://linux.vbird.org/linux_basic/0230filesystem.php#fstab"&gt;鳥哥的 Linux 私房菜 -- 第七章、Linux 磁碟與檔案系統管理&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;需要其他不同的設定的話可以參考後 自行修改 &lt;code&gt;options&lt;/code&gt;  &lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;code&gt;umask&lt;/code&gt; 用 &lt;code&gt;000&lt;/code&gt; 是因為我這台是個人使用的筆電&lt;br /&gt;
為了方便存取 D 槽才這樣設定&lt;br /&gt;
因為 &lt;code&gt;mount&lt;/code&gt; 起來的 &lt;code&gt;owner&lt;/code&gt; 和 &lt;code&gt;group&lt;/code&gt; 都會是 root&lt;br /&gt;
反正只有我一個人用&lt;br /&gt;
設 &lt;code&gt;777&lt;/code&gt; 會比較方便 但相對安全性就變低了Orz  &lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">m157q</dc:creator><pubDate>Wed, 28 Oct 2015 15:14:00 +0800</pubDate><guid isPermaLink="false">tag:blog.m157q.tw,2013-02-17:posts/2013/02/17/automatically-mount-windows-partition-by-using-ntfs-3g/</guid><category>Linux</category><category>Arch Linux</category><category>fstab</category><category>UUID</category><category>NTFS</category><category>ntfs-3g</category></item><item><title>Font Config in Arch Linux</title><link>https://blog.m157q.tw/posts/2013/02/16/font-config-in-arch-linux/</link><description>&lt;p&gt;漂亮的字型對一個好的使用環境來講真的非常重要  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;中文字型我慣用 &lt;code&gt;LiHei Pro&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;英數字型我慣用 &lt;code&gt;Monaco&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;這幾天剛用 awesome window manager&lt;br /&gt;
一直在想辦法讓預設的字型變好看  &lt;/p&gt;
&lt;hr /&gt;
&lt;ul&gt;
&lt;li&gt;在 &lt;code&gt;~/.config/awesome/rc.lua&lt;/code&gt; 中，加入 &lt;code&gt;awesome.font = "LiHei Pro 12"&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;在 &lt;code&gt;~/.config/awesome/themes/default/theme.lua&lt;/code&gt; 中，加入 &lt;code&gt;theme.font = "LiHei Pro 10"&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;除了這兩個之外 其他以 gtk 開啟的程式預設字型真的很醜= ="&lt;br /&gt;
找了好多篇文章 最後發現應該加上 &lt;code&gt;~/.fonts.conf&lt;/code&gt; 就行了&lt;br /&gt;
參考了以下這三篇 Archwiki 的 section 之後  &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Fonts#Fallback_font_order_with_X11"&gt;Fonts - ArchWiki&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Font_configuration/Examples"&gt;Font configuration/Examples - ArchWiki&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Chromium#Font_Rendering"&gt;Chromium - ArchWiki&lt;/a&gt;  &lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;我的 &lt;code&gt;~/.fonts.conf&lt;/code&gt; 目前長這樣  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot;?&amp;gt;&lt;/span&gt;  
&lt;span class="cp"&gt;&amp;lt;!DOCTYPE fontconfig SYSTEM &amp;quot;fonts.dtd&amp;quot;&amp;gt;&lt;/span&gt;  

&lt;span class="nt"&gt;&amp;lt;fontconfig&amp;gt;&lt;/span&gt;  
&lt;span class="c"&gt;&amp;lt;!-- set font --&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;alias&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;family&amp;gt;&lt;/span&gt;serif&lt;span class="nt"&gt;&amp;lt;/family&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;prefer&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;family&amp;gt;&lt;/span&gt;Monaco&lt;span class="nt"&gt;&amp;lt;/family&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;family&amp;gt;&lt;/span&gt;LiHei Pro&lt;span class="nt"&gt;&amp;lt;/family&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;/prefer&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;/alias&amp;gt;&lt;/span&gt;  

&lt;span class="nt"&gt;&amp;lt;alias&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;family&amp;gt;&lt;/span&gt;Sans-serif&lt;span class="nt"&gt;&amp;lt;/family&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;prefer&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;family&amp;gt;&lt;/span&gt;Monaco&lt;span class="nt"&gt;&amp;lt;/family&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;family&amp;gt;&lt;/span&gt;LiHei Pro&lt;span class="nt"&gt;&amp;lt;/family&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;/prefer&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;/alias&amp;gt;&lt;/span&gt;  

&lt;span class="nt"&gt;&amp;lt;alias&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;family&amp;gt;&lt;/span&gt;monospace&lt;span class="nt"&gt;&amp;lt;/family&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;prefer&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;family&amp;gt;&lt;/span&gt;Monaco&lt;span class="nt"&gt;&amp;lt;/family&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;/prefer&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;/alias&amp;gt;&lt;/span&gt;  

&lt;span class="c"&gt;&amp;lt;!-- Chromium fonts rendering from archwiki-chromium --&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;match&lt;/span&gt; &lt;span class="na"&gt;target=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;font&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;edit&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;autohint&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;mode=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;assign&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;bool&amp;gt;&lt;/span&gt;true&lt;span class="nt"&gt;&amp;lt;/bool&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;/edit&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;edit&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hinting&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;mode=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;assign&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;bool&amp;gt;&lt;/span&gt;true&lt;span class="nt"&gt;&amp;lt;/bool&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;/edit&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;edit&lt;/span&gt; &lt;span class="na"&gt;mode=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;assign&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hintstyle&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;const&amp;gt;&lt;/span&gt;hintslight&lt;span class="nt"&gt;&amp;lt;/const&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;/edit&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;/match&amp;gt;&lt;/span&gt;  

&lt;span class="c"&gt;&amp;lt;!-- make the font looks perfect from  &lt;/span&gt;
&lt;span class="c"&gt;tps://wiki.archlinux.org/index.php/Font_Configuration/fontconfig_Examples --&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;match&lt;/span&gt; &lt;span class="na"&gt;target=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;font&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;edit&lt;/span&gt; &lt;span class="na"&gt;mode=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;assign&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;autohint&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;  &lt;span class="nt"&gt;&amp;lt;bool&amp;gt;&lt;/span&gt;true&lt;span class="nt"&gt;&amp;lt;/bool&amp;gt;&amp;lt;/edit&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;edit&lt;/span&gt; &lt;span class="na"&gt;mode=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;assign&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hinting&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;   &lt;span class="nt"&gt;&amp;lt;bool&amp;gt;&lt;/span&gt;false&lt;span class="nt"&gt;&amp;lt;/bool&amp;gt;&amp;lt;/edit&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;edit&lt;/span&gt; &lt;span class="na"&gt;mode=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;assign&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;lcdfilter&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;const&amp;gt;&lt;/span&gt;lcddefault&lt;span class="nt"&gt;&amp;lt;/const&amp;gt;&amp;lt;/edit&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;edit&lt;/span&gt; &lt;span class="na"&gt;mode=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;assign&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hintstyle&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;const&amp;gt;&lt;/span&gt;hintslight&lt;span class="nt"&gt;&amp;lt;/const&amp;gt;&amp;lt;/edit&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;edit&lt;/span&gt; &lt;span class="na"&gt;mode=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;assign&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;antialias&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;bool&amp;gt;&lt;/span&gt;true&lt;span class="nt"&gt;&amp;lt;/bool&amp;gt;&amp;lt;/edit&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;edit&lt;/span&gt; &lt;span class="na"&gt;mode=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;assign&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;rgba&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;      &lt;span class="nt"&gt;&amp;lt;const&amp;gt;&lt;/span&gt;rgb&lt;span class="nt"&gt;&amp;lt;/const&amp;gt;&amp;lt;/edit&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;/match&amp;gt;&lt;/span&gt;  

&lt;span class="nt"&gt;&amp;lt;match&lt;/span&gt; &lt;span class="na"&gt;target=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;font&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;test&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;pixelsize&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;qual=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;any&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;compare=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;more&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&amp;lt;double&amp;gt;&lt;/span&gt;15&lt;span class="nt"&gt;&amp;lt;/double&amp;gt;&amp;lt;/test&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;edit&lt;/span&gt; &lt;span class="na"&gt;mode=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;assign&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;lcdfilter&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&amp;lt;const&amp;gt;&lt;/span&gt;lcdlight&lt;span class="nt"&gt;&amp;lt;/const&amp;gt;&amp;lt;/edit&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;edit&lt;/span&gt; &lt;span class="na"&gt;mode=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;assign&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hintstyle&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&amp;lt;const&amp;gt;&lt;/span&gt;hintnone&lt;span class="nt"&gt;&amp;lt;/const&amp;gt;&amp;lt;/edit&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;/match&amp;gt;&lt;/span&gt;  

&lt;span class="nt"&gt;&amp;lt;match&lt;/span&gt; &lt;span class="na"&gt;target=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;font&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;test&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;weight&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;compare=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;more&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&amp;lt;const&amp;gt;&lt;/span&gt;medium&lt;span class="nt"&gt;&amp;lt;/const&amp;gt;&amp;lt;/test&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;edit&lt;/span&gt; &lt;span class="na"&gt;mode=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;assign&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hintstyle&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&amp;lt;const&amp;gt;&lt;/span&gt;hintnone&lt;span class="nt"&gt;&amp;lt;/const&amp;gt;&amp;lt;/edit&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;edit&lt;/span&gt; &lt;span class="na"&gt;mode=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;assign&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;lcdfilter&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&amp;lt;const&amp;gt;&lt;/span&gt;lcdlight&lt;span class="nt"&gt;&amp;lt;/const&amp;gt;&amp;lt;/edit&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;/match&amp;gt;&lt;/span&gt;  

&lt;span class="nt"&gt;&amp;lt;match&lt;/span&gt; &lt;span class="na"&gt;target=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;font&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;test&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;slant&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;compare=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;not_eq&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&amp;lt;double&amp;gt;&lt;/span&gt;0&lt;span class="nt"&gt;&amp;lt;/double&amp;gt;&amp;lt;/test&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;edit&lt;/span&gt; &lt;span class="na"&gt;mode=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;assign&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hintstyle&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&amp;lt;const&amp;gt;&lt;/span&gt;hintnone&lt;span class="nt"&gt;&amp;lt;/const&amp;gt;&amp;lt;/edit&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;edit&lt;/span&gt; &lt;span class="na"&gt;mode=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;assign&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;lcdfilter&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&amp;lt;const&amp;gt;&lt;/span&gt;lcdlight&lt;span class="nt"&gt;&amp;lt;/const&amp;gt;&amp;lt;/edit&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;/match&amp;gt;&lt;/span&gt;  
&lt;span class="nt"&gt;&amp;lt;/fontconfig&amp;gt;&lt;/span&gt;  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;結果這些都弄完了以後 發現有些地方還是沒改到...  &lt;/p&gt;
&lt;p&gt;&lt;img alt="Error" src="/files/font-config-in-arch-linux/error.png" /&gt;  &lt;/p&gt;
&lt;p&gt;這我真的不知道要怎麼改了Orz  &lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Fonts#Fallback_font_order_with_X11"&gt;Fonts - ArchWiki&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Font_configuration/Examples"&gt;Font configuration/Examples - ArchWiki&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Chromium#Font_Rendering"&gt;Chromium - ArchWiki&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">m157q</dc:creator><pubDate>Wed, 28 Oct 2015 15:27:00 +0800</pubDate><guid isPermaLink="false">tag:blog.m157q.tw,2013-02-16:posts/2013/02/16/font-config-in-arch-linux/</guid><category>Linux</category><category>Arch Linux</category><category>awesomewm</category><category>font</category></item></channel></rss>