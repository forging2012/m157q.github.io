<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>  GitHub Talk - Advanced Git and CI in NCTU
 | Just for noting</title>

    <meta name="author" content="m157q"/>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/magnific-popup.min.css"/>
    <link rel="stylesheet" href="https://blog.m157q.tw/theme/css/jquery.mglass.css"/>
    <link rel="stylesheet" href="https://blog.m157q.tw/theme/css/pygment-solarized-dark.css"/>
    <link rel="stylesheet" href="https://blog.m157q.tw/theme/css/style.css"/>

    <!-- Fonts -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'/>
    <link href='https://fonts.googleapis.com/css?family=Istok+Web' rel='stylesheet' type='text/css'/>
    <link href='https://fonts.googleapis.com/css?family=Droid+Sans+Mono' rel='stylesheet' type='text/css'/>


    <link rel="icon" href="https://blog.m157q.tw/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="https://blog.m157q.tw/favicon.ico" type="image/x-icon">

    <!-- Feeds -->
      <link href="https://blog.m157q.tw/feeds/all.feed.atom.xml" type="application/atom+xml" rel="alternate" title="Just for noting - All posts - Atom Feed"/>
      <link href="https://blog.m157q.tw/feeds/all.feed.rss.xml" type="application/rss+xml" rel="alternate" title="Just for noting - All posts - RSS Feed"/>
      <link href="https://blog.m157q.tw/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="Just for noting - Latest posts - Atom Feed"/>
      <link href="https://blog.m157q.tw/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="Just for noting - Latest posts - RSS Feed"/>
      <link href="https://blog.m157q.tw/feeds/category.confmeetup.atom.xml" type="application/atom+xml" rel="alternate" title="Just for noting - Category: Conf/Meetup - Atom Feed"/>
      <link href="https://blog.m157q.tw/feeds/category.confmeetup.rss.xml" type="application/rss+xml" rel="alternate" title="Just for noting - Category: Conf/Meetup - RSS Feed"/>

    <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-45367183-2', 'auto');
    ga('send', 'pageview');
    </script>



  </head>

  <body>

    <div class="container">

      <div class="page-header">
        <h1><a href="https://blog.m157q.tw">Just for noting</a> <small></small></h1>
      </div>

      <nav class="navbar navbar-default">

        <!-- Hamburger menu for mobile -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#plumage-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="https://blog.m157q.tw" title="">Just for noting</a>
        </div>

        <!-- Menus and search forms -->
        <div class="collapse navbar-collapse" id="plumage-navbar-collapse-1">

          <ul class="nav navbar-nav">
<li >
                <a href="/categories">Categories</a>
              </li>
<li >
                <a href="/archives">Archives</a>
              </li>
<li >
                <a href="/tags">Tags</a>
              </li>
<li >
                  <a href="https://blog.m157q.tw/pages/cv/">CV</a>
                </li>
          </ul>


            <form class="navbar-form navbar-right" role="search" action="https://blog.m157q.tw/search.html" onsubmit="return validateForm(this.elements['q'].value);">
              <div class="form-group">
                <div class="input-group">
                  <input type="text" name="q" id="tipue_search_input" class="form-control search-query" placeholder="Search" required />
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fa
                        fa-search fa-fw"></i></button>
                  </span>
                </div>
              </div>
            </form>

        </div>

      </nav>

    </div>


    <div class="container main">


      <div class="row">
        <div class=" col-md-9  ">
  <h1>
    <a href="https://blog.m157q.tw/posts/2015/03/20/github-talk-advanced-git-and-ci-in-nctu/" rel="bookmark" title="Permalink to GitHub Talk - Advanced Git and CI in NCTU">GitHub Talk - Advanced Git and CI in NCTU</a>
  </h1>
        </div>
      </div>

      <div class="row">


        <div class=" col-md-9 " id="content" role="main">
  

  <blockquote>
    <p>GitHub X CCCA X SITCON Talk in NCTU</p>
  </blockquote>
  <div>
    <h2>Look into .git directory</h2>
<div class="highlight"><pre><span></span>$ git init foo  
$ <span class="nb">cd</span> foo  
$ tree  
</pre></div>


<div class="highlight"><pre><span></span>.  
├── HEAD  
├── config  
├── description  
├── hooks  
│   ├── applypatch-msg.sample  
│   ├── commit-msg.sample  
│   ├── post-update.sample  
│   ├── pre-applypatch.sample  
│   ├── pre-commit.sample  
│   ├── pre-push.sample  
│   ├── pre-rebase.sample  
│   ├── prepare-commit-msg.sample  
│   └── update.sample  
├── info  
│   └── exclude  
├── objects  
│   ├── info  
│   └── pack  
└── refs  
    ├── heads  
    └── tags  
</pre></div>


<ul>
<li>refs  <ul>
<li>HEAD, tag, branch  </li>
</ul>
</li>
<li>objects  <ul>
<li>blob, tree, commit  <ul>
<li>blob  <ul>
<li>type, bytes, content of blob  </li>
<li>ex: <code>blob 13hello,world</code>  </li>
</ul>
</li>
<li>tree  <ul>
<li>main file directory for the project  </li>
<li>tree: point to the next tree object  </li>
<li>blob: ref name for blob object (one for every related object files for this tree)  </li>
</ul>
</li>
<li>commit  <ul>
<li>parent: point to the last commit  </li>
<li>message: commit message  </li>
</ul>
</li>
</ul>
</li>
<li>store files for git  </li>
<li>SHA1 hash  </li>
<li>Compressed  </li>
<li>commit action will add a commit object and tree object into the objects  </li>
<li>tree objects have filenames for blob objects  </li>
<li>blob files which have exactly same content will be stored as the same hash not only in the same project but also among all users.  </li>
</ul>
</li>
</ul>
<h3>Branch</h3>
<ul>
<li>branch just store the hash of the newest commit for that branch  </li>
</ul>
<h3>Tag</h3>
<ul>
<li>regular tags do not have hash value  </li>
<li>be stored in refs/tags  </li>
<li>just a text file contain the commit object hash  </li>
<li>annotated tag  <ul>
<li><code>git tag -a $tag_name</code>  </li>
<li>tagger, annotation  </li>
<li>has a hash value  </li>
</ul>
</li>
</ul>
<h2>Webhook</h2>
<ul>
<li>use <a href="http://requestb.in/">http://requestb.in/</a> as payload url in github, so every time there's a event github will send event message to the payload url.  </li>
<li>Travis CI  </li>
<li><a href="https://github.com/muan/emoji">https://github.com/muan/emoji</a>  </li>
</ul>
<h2>Misc</h2>
<ul>
<li>if you delete tree objects manually, <code>git fsck</code> will tell you what happened.  </li>
<li>Git does not support empty directory  </li>
<li>.gitkeep  </li>
<li>Every files in Git are treated as binary, so the blob file is not just a plaintext file  </li>
<li>git clone won't clone unreferenced files in default, but you can specify that.  </li>
<li>git push/pull won't do anything about unreferenced files  </li>
</ul>
<div class="highlight"><pre><span></span>$ watch -n .1 tree  
</pre></div>


<h2>Git commands</h2>
<div class="highlight"><pre><span></span>git ls-tree  
git ls-tree HEAD  

git fsck  

git show <span class="nv">$tag_name</span> --pretty<span class="o">=</span>raw<span class="sb">`</span>  

git rebase <span class="nv">$branch</span>  

git reflog  
// use reflog to get the <span class="nb">hash</span> or <span class="nb">alias</span> and use git reset to undo your actions  

git gc  
// delete useless files <span class="o">(</span>unreferenced files<span class="o">)</span> after <span class="m">90</span> days when someone <span class="k">do</span> the action  
</pre></div>


<h2>Reference</h2>
<ul>
<li><a href="https://github.com/muan/emoji/pull/132">Example at NCTU by johndbritton · Pull Request #132 · muan/emoji · GitHub</a>  </li>
</ul>
<hr />
<h2>Thoughts</h2>
<p>雖然內容大部份在 GitBook 都有<br />
不過真的覺得 <a href="https://github.com/johndbritton">Mr.Britton</a> 真的講解得蠻清楚的<br />
比較理解 .git folder 裡面的東西是在做什麼用的<br />
CI 的部分只有提到 Travis CI 在 GitHub 上面的 Webhook<br />
然後 show 一下 GitHub Repo 綁 Traivs CI 後<br />
在 PR 的時候會幫忙跑測試<br />
原本以為會介紹一下 Travis CI 大概要怎麼用<br />
看來得自己找時間研究一下了  </p>
<p>然後今天又拿到 Octocat 的新貼紙啦<br />
<img alt="Octocat" src="/files/github-talk-advanced-git-and-ci-in-nctu/octocat.jpg" /><br />
感謝 <a href="https://github.com/muan">muan</a> 的這則 Twitter <a href="https://twitter.com/muanchiou/status/571684266490265601">訊息</a> 才有機會在交大聽到這場 Talk<br />
原來 <a href="https://github.com/muan/emoji">https://github.com/muan/emoji</a> 是她的 Repo<br />
GitHub 上越來越多 emoji 了XDD  </p>
  </div>

    <hr>
    <section>
        <p id="post-share-links">
            <h3>Share</h3>
            <a href="https://twitter.com/intent/tweet?text=GitHub%20Talk%20-%20Advanced%20Git%20and%20CI%20in%20NCTU%0Ahttps%3A//blog.m157q.tw/posts/2015/03/20/github-talk-advanced-git-and-ci-in-nctu/%0Avia%20%40M157q%0A" target="_blank" title="Share on Twitter"><i class="fa fa-twitter-square fa-3x"></i></a>
            <a href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p%5Burl%5D=https%3A//blog.m157q.tw/posts/2015/03/20/github-talk-advanced-git-and-ci-in-nctu/" target="_blank" title="Share on Facebook"><i class="fa fa-facebook-square fa-3x"></i></a>
            <a href="https://plus.google.com/share?url=https%3A//blog.m157q.tw/posts/2015/03/20/github-talk-advanced-git-and-ci-in-nctu/" target="_blank" title="Share on Google Plus"><i class="fa fa-google-plus-square fa-3x"></i></a>
            <a href="mailto:?subject=GitHub%20Talk%20-%20Advanced%20Git%20and%20CI%20in%20NCTU&amp;body=https%3A//blog.m157q.tw/posts/2015/03/20/github-talk-advanced-git-and-ci-in-nctu/" target="_blank" title="Share via Email"><i class="fa fa-envelope-o fa-3x"></i></a>
        </p>
    </section>

<hr>
<section id="donation">
    <h3>Donation</h3>
    <p id="donation-chinese">
      如果覺得這篇文章對你有幫助，
      除了留言讓我知道外，
      或許也可以考慮請我喝杯咖啡，
      不論金額多寡我都會非常感激且能鼓勵我繼續寫出對你有幫助的文章。
    </p>
    <p id="donation-english">
      If this blog post happens to be helpful to you, besides of leaving a reply, you may consider buy me a cup of coffee to support me. It would help me write more articles helpful to you in the future and I would really appreciate it.
    </p>
    <ul id="donation-address">
			<li><a href="https://payment.opay.tw/Broadcaster/Donate/4E163AAE10E448A30DB244CF85527271">歐付寶</a></li>

			<li><a href="https://www.paypal.me/m157q">PayPal</a></li>

			<li>BTC: <a href="https://blockchain.info/address/1HWMzBGTQ8VUJGXgvSDzAFacfeY2sLiZda">1HWMzBGTQ8VUJGXgvSDzAFacfeY2sLiZda</a></li>

			<li>ETH: <a href="https://etherscan.io/address/0x0380433c5cdda13c8cd6cff5ddbcc1d7701bcb83">0x0380433c5cdda13c8cd6cff5ddbcc1d7701bcb83</a></li>

			<li>LTC: <a href="https://chainz.cryptoid.info/ltc/address.dws?LUFkjq32kEAiYqnMG25isqGNdgkehj9rJT.htm">LUFkjq32kEAiYqnMG25isqGNdgkehj9rJT</a></li>
    </ul>
</section>

    <hr>
    <h3>Related Posts</h3>
    <!-- TODO: Use fancier related layout, as in http://kevin.deldycke.com/2012/04/beautify-contextual-related-posts-wordpress-plugin/ -->
    <ul>
        <li><a href="https://blog.m157q.tw/posts/2016/12/12/y2016w49/">Y2016W49</a></li>
        <li><a href="https://blog.m157q.tw/posts/2017/01/16/y2017w02/">Y2017W02</a></li>
        <li><a href="https://blog.m157q.tw/posts/2017/04/03/y2017w13/">Y2017W13</a></li>
        <li><a href="https://blog.m157q.tw/posts/2016/10/17/y2016w41/">Y2016W41</a></li>
        <li><a href="https://blog.m157q.tw/posts/2017/01/23/y2017w03/">Y2017W03</a></li>
      </ul>

    <div class="comments">
      <div id="disqus_thread"></div>
	  <script type="text/javascript">
        var disqus_shortname = 'm157q-logdown';
        var disqus_identifier = "posts/2015/03/20/github-talk-advanced-git-and-ci-in-nctu/";
        var disqus_title = "GitHub Talk - Advanced Git and CI in NCTU";
        var disqus_url = "https://blog.m157q.tw/posts/2015/03/20/github-talk-advanced-git-and-ci-in-nctu/";

        var disqus_config = function () {
            this.page.url = disqus_url;
            this.page.identifier = disqus_identifier;
        };
        (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus</a>.</noscript>
    </div>

        </div>

          <div class="col-md-3">
  <div class="well">

    <p><abbr title="2015-03-20T14:30:29+08:00"><i class="fa fa-calendar"></i> Fri 20 March 2015</abbr></p>

      <p><abbr title="2015-10-27T12:31:00+08:00"><i class="fa fa-pencil"></i>Tue 27 October 2015</abbr></p>

      <p><address>
        <i class="fa fa-user"></i> By
          <a href="https://blog.m157q.tw/author/m157q.html" rel="author">m157q</a>
      </address></p>

    <hr/>

      <p>
              <p>
              <a href="https://blog.m157q.tw/category/confmeetup/" rel="tag"
                  data-toggle="tooltip"
                  class="label label-info"
                  title="48 articles in this category">Conf/Meetup</a>
              </p>
            <a href="/tag/github/" data-toggle="tooltip"
      class="label label-default"
      title="31 articles with this tag">GitHub</a>
  <br>
            <a href="/tag/git/" data-toggle="tooltip"
      class="label label-default"
      title="17 articles with this tag">git</a>
  <br>
            <a href="/tag/speech/" data-toggle="tooltip"
      class="label label-default"
      title="5 articles with this tag">Speech</a>
  <br>
            <a href="/tag/thought/" data-toggle="tooltip"
      class="label label-default"
      title="5 articles with this tag">Thought</a>
  <br>
      </p>
      <hr/>


      <nav>
        <ul class="pager">
          <li class="previous ">
            <a  href="https://blog.m157q.tw/posts/2015/03/19/compiler-design-week-4/" title="Compiler Design Week 4"  rel="prev">
              <span aria-hidden="true">←</span> Older
            </a>
          </li>
          <li class="next ">
            <a  href="https://blog.m157q.tw/posts/2015/03/24/technology-entrepreneurship-week-5/" title="Technology Entrepreneurship Week 5"  rel="next">
              Newer <span aria-hidden="true">→</span>
            </a>
          </li>
        </ul>
      </nav>

  </div>
            
          </div>

      </div>

    </div>

    <!-- TODO: make footer sticky -->
    <footer class="container-fluid">
      <div class="container">
        <div class="row">

            <div class="col-md-2">
                <h5>Social</h5>
                <ul class="list-unstyled">
                  <li>  <a href="https://github.com/M157q">
      <i class="fa fa-github"></i>
    GitHub
  </a></li>
                  <li>  <a href="https://www.twitter.com/M157q">
      <img src="https://icons.better-idea.org/icon?url=www.twitter.com&size=16" width="16" height="16" class="icon" alt="www.twitter.com icon"/>
    Twitter
  </a></li>
                </ul>
            </div>
            <div class="col-md-2">
                <h5>Links</h5>
                <ul class="list-unstyled">
                  <li>  <a href="http://getpelican.com/">
      <img src="https://icons.better-idea.org/icon?url=getpelican.com&size=16" width="16" height="16" class="icon" alt="getpelican.com icon"/>
    Pelican
  </a></li>
                  <li>  <a href="http://python.org/">
      <img src="https://icons.better-idea.org/icon?url=python.org&size=16" width="16" height="16" class="icon" alt="python.org icon"/>
    Python.org
  </a></li>
                  <li>  <a href="http://jinja.pocoo.org/">
      <img src="https://icons.better-idea.org/icon?url=jinja.pocoo.org&size=16" width="16" height="16" class="icon" alt="jinja.pocoo.org icon"/>
    Jinja2
  </a></li>
                </ul>
            </div>

          <div class="col-md-2">
            <h5>Browse content by</h5>
            <ul class="list-unstyled">
                <li><a href="https://blog.m157q.tw/categories/index.html"><i class="fa fa-tags"></i> Categories</a></li>
                <li><a href="https://blog.m157q.tw/archives/index.html"><i class="fa fa-calendar"></i> Dates</a></li>
                <li><a href="https://blog.m157q.tw/tags/index.html"><i class="fa fa-tag"></i> Tags</a></li>
            </ul>
          </div>

          <div class="col-md-2 text-muted">
            <h5>Copyright notice</h5>
            <p>© Copyright 2013-2018 m157q.</p>
          </div>

          <div class="col-md-2 text-muted">
            <h5>Disclaimer</h5>
              <p>All opinions expressed in this site are my own personal opinions and are not endorsed by, nor do they represent the opinions of my previous, current and future employers or any of its affiliates, partners or customers.</p>
          </div>

          <div class="col-md-2">
              <h5>Feeds</h5>
              <ul class="list-unstyled">
                  <li><small><a href="https://blog.m157q.tw/feeds/all.feed.atom.xml"><i class="fa fa-rss"></i> All posts (Atom)</a></small></li>
                  <li><small><a href="https://blog.m157q.tw/feeds/all.feed.rss.xml"><i class="fa fa-rss"></i> All posts (RSS)</a></small></li>
                  <li><small><a href="https://blog.m157q.tw/feeds/atom.xml"><i class="fa fa-rss"></i> Latest posts (Atom)</a></small></li>
                  <li><small><a href="https://blog.m157q.tw/feeds/rss.xml"><i class="fa fa-rss"></i> Latest posts (RSS)</a></small></li>
                  <li><small><a href="https://blog.m157q.tw/feeds/category.confmeetup.atom.xml"><i class="fa fa-rss"></i> Category: Conf/Meetup (Atom)</a></small></li>
                  <li><small><a href="https://blog.m157q.tw/feeds/category.confmeetup.rss.xml"><i class="fa fa-rss"></i> Category: Conf/Meetup (RSS)</a></small></li>
              </ul>
          </div>

        </div>
      </div>

      <h5 class="text-right"><a href="#"><i class="fa fa-arrow-up"></i> Back to top</a></h5>

      <div class="container">
        <div class="row col-md-12 text-muted text-center">
          Site generated by <a href="https://getpelican.com"> Pelican</a>.<br/>
          <a href="https://github.com/kdeldycke/plumage"> Plumage</a> theme by <a href="https://kevin.deldycke.com">Kevin Deldycke</a>.
        </div>
      </div>

    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fitvids/1.1.0/jquery.fitvids.min.js"></script>
    <script src="https://blog.m157q.tw/theme/js/jquery.mglass.js"></script>
    <script src="https://blog.m157q.tw/theme/js/application.js"></script>

  </body>
</html>